<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>缓存的好处 | Jay&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/codecat.jpeg">
    <meta name="description" content="贾一倍的个人网站">
    
    <link rel="preload" href="/assets/css/0.styles.35bcedcf.css" as="style"><link rel="preload" href="/assets/js/app.ffeb74c7.js" as="script"><link rel="preload" href="/assets/js/2.8c000b42.js" as="script"><link rel="preload" href="/assets/js/41.a517905d.js" as="script"><link rel="prefetch" href="/assets/js/10.d264db59.js"><link rel="prefetch" href="/assets/js/11.0bca9d9a.js"><link rel="prefetch" href="/assets/js/12.4f250ebe.js"><link rel="prefetch" href="/assets/js/13.e66cb20f.js"><link rel="prefetch" href="/assets/js/14.e9740e5f.js"><link rel="prefetch" href="/assets/js/15.77f24c1c.js"><link rel="prefetch" href="/assets/js/16.81145a00.js"><link rel="prefetch" href="/assets/js/17.fecbbc6a.js"><link rel="prefetch" href="/assets/js/18.fa64136a.js"><link rel="prefetch" href="/assets/js/19.0bf73149.js"><link rel="prefetch" href="/assets/js/20.ecf66ee0.js"><link rel="prefetch" href="/assets/js/21.9b56c347.js"><link rel="prefetch" href="/assets/js/22.eba330b8.js"><link rel="prefetch" href="/assets/js/23.cdfc8136.js"><link rel="prefetch" href="/assets/js/24.ecbff0b4.js"><link rel="prefetch" href="/assets/js/25.a765f52f.js"><link rel="prefetch" href="/assets/js/26.1df3f3be.js"><link rel="prefetch" href="/assets/js/27.6d559f57.js"><link rel="prefetch" href="/assets/js/28.44d0a27d.js"><link rel="prefetch" href="/assets/js/29.0db53b84.js"><link rel="prefetch" href="/assets/js/3.593bb0f3.js"><link rel="prefetch" href="/assets/js/30.ecd999ba.js"><link rel="prefetch" href="/assets/js/31.52600e5f.js"><link rel="prefetch" href="/assets/js/32.32943b2d.js"><link rel="prefetch" href="/assets/js/33.362f4d59.js"><link rel="prefetch" href="/assets/js/34.d0944a8e.js"><link rel="prefetch" href="/assets/js/35.bf1908ad.js"><link rel="prefetch" href="/assets/js/36.2d9be9dc.js"><link rel="prefetch" href="/assets/js/37.3358ac3c.js"><link rel="prefetch" href="/assets/js/38.bae9ecf2.js"><link rel="prefetch" href="/assets/js/39.dfcb747a.js"><link rel="prefetch" href="/assets/js/4.01f7dd6c.js"><link rel="prefetch" href="/assets/js/40.dbf6c454.js"><link rel="prefetch" href="/assets/js/42.e1ae6c7e.js"><link rel="prefetch" href="/assets/js/43.c20697cd.js"><link rel="prefetch" href="/assets/js/44.d5c401fa.js"><link rel="prefetch" href="/assets/js/45.810ad2fb.js"><link rel="prefetch" href="/assets/js/46.cfe99c5e.js"><link rel="prefetch" href="/assets/js/47.32a6c154.js"><link rel="prefetch" href="/assets/js/48.be512d65.js"><link rel="prefetch" href="/assets/js/49.d36d3e6d.js"><link rel="prefetch" href="/assets/js/5.eb23ea04.js"><link rel="prefetch" href="/assets/js/50.4312a7d3.js"><link rel="prefetch" href="/assets/js/51.8db2277f.js"><link rel="prefetch" href="/assets/js/52.0ae05eb4.js"><link rel="prefetch" href="/assets/js/53.e61fc25e.js"><link rel="prefetch" href="/assets/js/54.0f5b381c.js"><link rel="prefetch" href="/assets/js/55.c7beb55c.js"><link rel="prefetch" href="/assets/js/56.97fa88fd.js"><link rel="prefetch" href="/assets/js/57.1e086f28.js"><link rel="prefetch" href="/assets/js/58.97111a0a.js"><link rel="prefetch" href="/assets/js/59.8865259a.js"><link rel="prefetch" href="/assets/js/6.516e3b20.js"><link rel="prefetch" href="/assets/js/60.0541b26f.js"><link rel="prefetch" href="/assets/js/61.624fbdfa.js"><link rel="prefetch" href="/assets/js/62.e71bbf4a.js"><link rel="prefetch" href="/assets/js/63.ad78749d.js"><link rel="prefetch" href="/assets/js/64.931d419d.js"><link rel="prefetch" href="/assets/js/65.b46213b4.js"><link rel="prefetch" href="/assets/js/66.92c8d024.js"><link rel="prefetch" href="/assets/js/67.c63280ef.js"><link rel="prefetch" href="/assets/js/68.16012c5b.js"><link rel="prefetch" href="/assets/js/69.b4a8ea96.js"><link rel="prefetch" href="/assets/js/7.c7625e6b.js"><link rel="prefetch" href="/assets/js/70.c03c3735.js"><link rel="prefetch" href="/assets/js/71.76491655.js"><link rel="prefetch" href="/assets/js/72.ab24e160.js"><link rel="prefetch" href="/assets/js/73.9026af07.js"><link rel="prefetch" href="/assets/js/74.8f925ea4.js"><link rel="prefetch" href="/assets/js/75.8c3d4d08.js"><link rel="prefetch" href="/assets/js/76.2e25789c.js"><link rel="prefetch" href="/assets/js/77.bc9764be.js"><link rel="prefetch" href="/assets/js/78.d13a2495.js"><link rel="prefetch" href="/assets/js/8.80450da7.js"><link rel="prefetch" href="/assets/js/9.dd8d6c7c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35bcedcf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Jay's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/accumulate/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/stack/" class="nav-link">
  技术栈
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="/browser/" class="nav-link router-link-active">
  浏览器
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  计算机网络
</a></div><div class="nav-item"><a href="/optimize/" class="nav-link">
  优化
</a></div><div class="nav-item"><a href="/c++/" class="nav-link">
  c++
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/accumulate/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/stack/" class="nav-link">
  技术栈
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="/browser/" class="nav-link router-link-active">
  浏览器
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  计算机网络
</a></div><div class="nav-item"><a href="/optimize/" class="nav-link">
  优化
</a></div><div class="nav-item"><a href="/c++/" class="nav-link">
  c++
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Browser</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/browser/" aria-current="page" class="sidebar-link">浏览器相关</a></li><li><a href="/browser/ServiceWorker.html" class="sidebar-link">Service Worker</a></li><li><a href="/browser/htmlcssjs加载顺序.html" class="sidebar-link">加载解析过程</a></li><li><a href="/browser/缓存.html" class="active sidebar-link">缓存的好处</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h6 id="缓存的好处"><a href="#缓存的好处" class="header-anchor">#</a> 缓存的好处</h6> <ol><li>缓解服务器压力，不用每次都去请求某些数据了。</li> <li>提升性能，打开本地资源肯定会比请求服务器来的快。</li> <li>减少带宽消耗，当我们使用缓存时，只会产生很小的网络消耗</li></ol> <hr> <h6 id="web缓存"><a href="#web缓存" class="header-anchor">#</a> web缓存</h6> <p>数据库缓存，CDN缓存，代理服务器缓存，浏览器缓存</p> <table><thead><tr><th>web缓存类型</th> <th>描述</th></tr></thead> <tbody><tr><td>数据库缓存</td> <td>当web应用关系复杂，数据表较多，可以将查询后的数据放到内存中进行缓存，下次再查询时，直接从内存缓存中获取</td></tr> <tr><td>CDN缓存</td> <td>当发送web请求时，CDN会帮我们计算去哪得到这些内容的路径短且快。这是网站管理员部署的，所以他们将大家经常访问的内容放在CDN里</td></tr> <tr><td>代理服务器缓存</td> <td></td></tr> <tr><td>浏览器缓存</td> <td></td></tr></tbody></table> <hr> <h6 id="浏览器缓存-http缓存"><a href="#浏览器缓存-http缓存" class="header-anchor">#</a> 浏览器缓存（HTTP缓存）</h6> <ul><li>强缓存</li> <li>协商缓存</li></ul> <p>强缓存和协商缓存都属于Disk Cache</p> <p>缓存位置：Service Worker--&gt;Memory Cache--&gt;Disk Cache--&gt;Push Cache</p> <hr> <h6 id="强缓存"><a href="#强缓存" class="header-anchor">#</a> <strong>强缓存</strong></h6> <p>浏览器根据response Header来判断是否对资源进行缓存，如果响应头中<strong>expires</strong>、<strong>pragma</strong>或者<strong>cache-control</strong>字段，代表这是强缓存，浏览器就会把资源缓存在memory cache 或 disk cache中</p> <hr> <h6 id="协商缓存"><a href="#协商缓存" class="header-anchor">#</a> <strong>协商缓存</strong></h6> <ul><li>Last-Modified / If-Modified-Since</li></ul> <p>服务器响应时，Last-Modified表示资源最后修改时间</p> <p>当客户端再次发起请求时，If-Modified-Since==Last-Modified，告诉服务器资源上次修改时间，如果服务器资源的最后修改时间大于If-Modified-Since，则重新返回资源，状态码200，否则返回304，表示资源无更新</p> <ul><li>Etag / If-None-Match</li></ul> <p>Etag为资源文件的唯一标识</p> <p><strong>Etag / If-None-Match优先级高于Last-Modified / If-Modified-Since，同时存在则只有Etag / If-None-Match生效。</strong></p> <hr> <h6 id="缓存方案"><a href="#缓存方案" class="header-anchor">#</a> 缓存方案</h6> <ul><li>HTML: 协商缓存；</li> <li>css、js、图片：强缓存，文件名带上hash</li></ul> <h6 id="强缓存与协商缓存的区别"><a href="#强缓存与协商缓存的区别" class="header-anchor">#</a> 强缓存与协商缓存的区别</h6> <ol><li><p>强缓存不发请求到服务器，所以有时候资源更新了浏览器还不知道，但是协商缓存会发请求到服务器，所以资源是否更新，服务器肯定知道。</p></li> <li><p>大部分web服务器都默认开启协商缓存</p></li></ol> <hr> <h6 id="刷新对于强缓存和协商缓存的影响"><a href="#刷新对于强缓存和协商缓存的影响" class="header-anchor">#</a> 刷新对于强缓存和协商缓存的影响</h6> <ol><li>当ctrl+f5强制刷新网页时，直接从服务器加载，跳过强缓存和协商缓存。</li> <li>当f5刷新网页时，跳过强缓存，但是会检查协商缓存。</li> <li>浏览器地址栏中写入URL，回车 浏览器发现缓存中有这个文件了，不用继续请求了，直接去缓存拿</li></ol> <hr> <h6 id="cache-control"><a href="#cache-control" class="header-anchor">#</a> <strong>Cache-Control</strong></h6> <table><thead><tr><th>字段值</th> <th>说明</th></tr></thead> <tbody><tr><td>public</td> <td>客户端和代理服务器都可以缓存</td></tr> <tr><td>private</td> <td>只有浏览器能缓存</td></tr> <tr><td>no-cache</td> <td>跳过当前的强缓存，发送HTTP请求，即直接进入协商缓存阶段</td></tr> <tr><td>no-store</td> <td>非常粗暴，不进行任何形式的缓存</td></tr> <tr><td>max-age</td> <td>浏览器缓存有效时间</td></tr> <tr><td>s-maxage</td> <td>代理服务器的缓存时间</td></tr></tbody></table> <hr></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/browser/htmlcssjs加载顺序.html" class="prev">
        加载解析过程
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ffeb74c7.js" defer></script><script src="/assets/js/2.8c000b42.js" defer></script><script src="/assets/js/41.a517905d.js" defer></script>
  </body>
</html>
