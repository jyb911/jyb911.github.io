<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>props/$emit | Jay&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/codecat.jpeg">
    <meta name="description" content="贾一倍的个人网站">
    
    <link rel="preload" href="/assets/css/0.styles.35bcedcf.css" as="style"><link rel="preload" href="/assets/js/app.ffeb74c7.js" as="script"><link rel="preload" href="/assets/js/2.8c000b42.js" as="script"><link rel="preload" href="/assets/js/77.bc9764be.js" as="script"><link rel="prefetch" href="/assets/js/10.d264db59.js"><link rel="prefetch" href="/assets/js/11.0bca9d9a.js"><link rel="prefetch" href="/assets/js/12.4f250ebe.js"><link rel="prefetch" href="/assets/js/13.e66cb20f.js"><link rel="prefetch" href="/assets/js/14.e9740e5f.js"><link rel="prefetch" href="/assets/js/15.77f24c1c.js"><link rel="prefetch" href="/assets/js/16.81145a00.js"><link rel="prefetch" href="/assets/js/17.fecbbc6a.js"><link rel="prefetch" href="/assets/js/18.fa64136a.js"><link rel="prefetch" href="/assets/js/19.0bf73149.js"><link rel="prefetch" href="/assets/js/20.ecf66ee0.js"><link rel="prefetch" href="/assets/js/21.9b56c347.js"><link rel="prefetch" href="/assets/js/22.eba330b8.js"><link rel="prefetch" href="/assets/js/23.cdfc8136.js"><link rel="prefetch" href="/assets/js/24.ecbff0b4.js"><link rel="prefetch" href="/assets/js/25.a765f52f.js"><link rel="prefetch" href="/assets/js/26.1df3f3be.js"><link rel="prefetch" href="/assets/js/27.6d559f57.js"><link rel="prefetch" href="/assets/js/28.44d0a27d.js"><link rel="prefetch" href="/assets/js/29.0db53b84.js"><link rel="prefetch" href="/assets/js/3.593bb0f3.js"><link rel="prefetch" href="/assets/js/30.ecd999ba.js"><link rel="prefetch" href="/assets/js/31.52600e5f.js"><link rel="prefetch" href="/assets/js/32.32943b2d.js"><link rel="prefetch" href="/assets/js/33.362f4d59.js"><link rel="prefetch" href="/assets/js/34.d0944a8e.js"><link rel="prefetch" href="/assets/js/35.bf1908ad.js"><link rel="prefetch" href="/assets/js/36.2d9be9dc.js"><link rel="prefetch" href="/assets/js/37.3358ac3c.js"><link rel="prefetch" href="/assets/js/38.bae9ecf2.js"><link rel="prefetch" href="/assets/js/39.dfcb747a.js"><link rel="prefetch" href="/assets/js/4.01f7dd6c.js"><link rel="prefetch" href="/assets/js/40.dbf6c454.js"><link rel="prefetch" href="/assets/js/41.a517905d.js"><link rel="prefetch" href="/assets/js/42.e1ae6c7e.js"><link rel="prefetch" href="/assets/js/43.c20697cd.js"><link rel="prefetch" href="/assets/js/44.d5c401fa.js"><link rel="prefetch" href="/assets/js/45.810ad2fb.js"><link rel="prefetch" href="/assets/js/46.cfe99c5e.js"><link rel="prefetch" href="/assets/js/47.32a6c154.js"><link rel="prefetch" href="/assets/js/48.be512d65.js"><link rel="prefetch" href="/assets/js/49.d36d3e6d.js"><link rel="prefetch" href="/assets/js/5.eb23ea04.js"><link rel="prefetch" href="/assets/js/50.4312a7d3.js"><link rel="prefetch" href="/assets/js/51.8db2277f.js"><link rel="prefetch" href="/assets/js/52.0ae05eb4.js"><link rel="prefetch" href="/assets/js/53.e61fc25e.js"><link rel="prefetch" href="/assets/js/54.0f5b381c.js"><link rel="prefetch" href="/assets/js/55.c7beb55c.js"><link rel="prefetch" href="/assets/js/56.97fa88fd.js"><link rel="prefetch" href="/assets/js/57.1e086f28.js"><link rel="prefetch" href="/assets/js/58.97111a0a.js"><link rel="prefetch" href="/assets/js/59.8865259a.js"><link rel="prefetch" href="/assets/js/6.516e3b20.js"><link rel="prefetch" href="/assets/js/60.0541b26f.js"><link rel="prefetch" href="/assets/js/61.624fbdfa.js"><link rel="prefetch" href="/assets/js/62.e71bbf4a.js"><link rel="prefetch" href="/assets/js/63.ad78749d.js"><link rel="prefetch" href="/assets/js/64.931d419d.js"><link rel="prefetch" href="/assets/js/65.b46213b4.js"><link rel="prefetch" href="/assets/js/66.92c8d024.js"><link rel="prefetch" href="/assets/js/67.c63280ef.js"><link rel="prefetch" href="/assets/js/68.16012c5b.js"><link rel="prefetch" href="/assets/js/69.b4a8ea96.js"><link rel="prefetch" href="/assets/js/7.c7625e6b.js"><link rel="prefetch" href="/assets/js/70.c03c3735.js"><link rel="prefetch" href="/assets/js/71.76491655.js"><link rel="prefetch" href="/assets/js/72.ab24e160.js"><link rel="prefetch" href="/assets/js/73.9026af07.js"><link rel="prefetch" href="/assets/js/74.8f925ea4.js"><link rel="prefetch" href="/assets/js/75.8c3d4d08.js"><link rel="prefetch" href="/assets/js/76.2e25789c.js"><link rel="prefetch" href="/assets/js/78.d13a2495.js"><link rel="prefetch" href="/assets/js/8.80450da7.js"><link rel="prefetch" href="/assets/js/9.dd8d6c7c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35bcedcf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Jay's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/accumulate/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/stack/" class="nav-link router-link-active">
  技术栈
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  计算机网络
</a></div><div class="nav-item"><a href="/optimize/" class="nav-link">
  优化
</a></div><div class="nav-item"><a href="/c++/" class="nav-link">
  c++
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/accumulate/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/stack/" class="nav-link router-link-active">
  技术栈
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  计算机网络
</a></div><div class="nav-item"><a href="/optimize/" class="nav-link">
  优化
</a></div><div class="nav-item"><a href="/c++/" class="nav-link">
  c++
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Stack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/stack/" aria-current="page" class="sidebar-link">框架</a></li><li><a href="/stack/Axios.html" class="sidebar-link">主要功能</a></li><li><a href="/stack/Vue.html" class="sidebar-link">Vue双向绑定</a></li><li><a href="/stack/Vuex.html" class="sidebar-link">vuex</a></li><li><a href="/stack/Vue双向绑定及其原理.html" class="sidebar-link">/stack/Vue双向绑定及其原理.html</a></li><li><a href="/stack/diff算法.html" class="sidebar-link">前言</a></li><li><a href="/stack/react.html" class="sidebar-link">2022/6/2</a></li><li><a href="/stack/vue-router.html" class="sidebar-link">vue-router</a></li><li><a href="/stack/vue组件通信.html" class="active sidebar-link">props/$emit</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/stack/vue组件通信.html#props-emit" class="sidebar-link">props/$emit</a></li><li class="sidebar-sub-header"><a href="/stack/vue组件通信.html#children-parent" class="sidebar-link">$children/$parent</a></li><li class="sidebar-sub-header"><a href="/stack/vue组件通信.html#ref" class="sidebar-link">ref</a></li><li class="sidebar-sub-header"><a href="/stack/vue组件通信.html#v-model-本质上还是第一种" class="sidebar-link">v-model（本质上还是第一种）</a></li><li class="sidebar-sub-header"><a href="/stack/vue组件通信.html#provide-reject" class="sidebar-link">provide/reject</a></li><li class="sidebar-sub-header"><a href="/stack/vue组件通信.html#eventbus" class="sidebar-link">eventBus</a></li><li class="sidebar-sub-header"><a href="/stack/vue组件通信.html#vuex" class="sidebar-link">Vuex</a></li><li class="sidebar-sub-header"><a href="/stack/vue组件通信.html#localstorage-sessionstorage" class="sidebar-link">localStorage/sessionStorage</a></li><li class="sidebar-sub-header"><a href="/stack/vue组件通信.html#attrs-listeners-隔代通信" class="sidebar-link">$attrs/listeners（隔代通信）</a></li><li class="sidebar-sub-header"><a href="/stack/vue组件通信.html#兄弟组件通信" class="sidebar-link">兄弟组件通信</a></li><li class="sidebar-sub-header"><a href="/stack/vue组件通信.html#注意" class="sidebar-link">注意</a></li></ul></li><li><a href="/stack/异步更新和nextTick.html" class="sidebar-link">vue中的$nextTick</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="props-emit"><a href="#props-emit" class="header-anchor">#</a> props/$emit</h2> <ul><li>父组件通过<code>props</code>的方式向子组件传递数据，而通过<code>$emit</code> 子组件可以向父组件通信</li> <li>props是单向数据流，只能从父组件传到子组件，且不可以被修改</li></ul> <h2 id="children-parent"><a href="#children-parent" class="header-anchor">#</a> $children/$parent</h2> <ul><li>$children为子组件数组，$parent为父组件</li> <li>边界条件为根实例的$parent为new Vue()实例，这个实例的$parent为undefined；</li> <li>最底层子组件的$children为空数组</li></ul> <h2 id="ref"><a href="#ref" class="header-anchor">#</a> ref</h2> <p>通过ref引用子组件，并通过refs.ref访问子组件实例</p> <div class="language-vue extra-class"><pre class="language-vue"><code>// 父组件 app.vue

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>component-a</span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>comA<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>component-a</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">mounted</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> comA <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>$refs<span class="token punctuation">.</span>comA<span class="token punctuation">;</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>comA<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// Vue.js</span>
      comA<span class="token punctuation">.</span><span class="token function">sayHello</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// hello</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="v-model-本质上还是第一种"><a href="#v-model-本质上还是第一种" class="header-anchor">#</a> v-model（本质上还是第一种）</h2> <ul><li>父组件通过v-model给子组件传递值时，会自动传递一个value的props属性，在子组件中通过this.$emit(‘input’,val)自动修改v-model绑定的值</li></ul> <hr> <p><strong>以上为父子组件通信</strong></p> <h2 id="provide-reject"><a href="#provide-reject" class="header-anchor">#</a> provide/reject</h2> <ul><li>父组件调用provide提供数据</li> <li>子组件或非子组件调用inject注入提供的数据</li></ul> <h2 id="eventbus"><a href="#eventbus" class="header-anchor">#</a> eventBus</h2> <ul><li><p>先注册事件总线（vue实例）</p></li> <li><p>EventBus.$emit和EventBus.$on通过设定的事件发送和收数据</p></li> <li><p>全局定义</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//方式一</span>
<span class="token class-name">Vue</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span>$EventBus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//方式二</span>
window<span class="token punctuation">.</span>eventBus <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Vue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>触发事件</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//使用方式一定义时</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$EventBus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'eventName'</span><span class="token punctuation">,</span> param1<span class="token punctuation">,</span>param2<span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">)</span>
<span class="token comment">//使用方式二定义时</span>
EventBus<span class="token punctuation">.</span><span class="token function">$emit</span><span class="token punctuation">(</span><span class="token string">'eventName'</span><span class="token punctuation">,</span> param1<span class="token punctuation">,</span>param2<span class="token punctuation">,</span><span class="token operator">...</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>监听事件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//使用方式一定义时</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$EventBus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'eventName'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">param1<span class="token punctuation">,</span>param2<span class="token punctuation">,</span><span class="token operator">...</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//需要执行的代码</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">//使用方式二定义时</span>
EventBus<span class="token punctuation">.</span><span class="token function">$on</span><span class="token punctuation">(</span><span class="token string">'eventName'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">param1<span class="token punctuation">,</span>param2<span class="token punctuation">,</span><span class="token operator">...</span></span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token comment">//需要执行的代码</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>移除事件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//使用方式一定义时</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$EventBus<span class="token punctuation">.</span><span class="token function">$off</span><span class="token punctuation">(</span><span class="token string">'eventName'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//使用方式二定义时</span>
EventBus<span class="token punctuation">.</span><span class="token function">$off</span><span class="token punctuation">(</span><span class="token string">'eventName'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><hr> <h2 id="vuex"><a href="#vuex" class="header-anchor">#</a> Vuex</h2> <ul><li>解决了<strong>多个视图依赖于同一状态</strong>和<strong>多个视图的行为需要变更同一状态</strong>的问题</li> <li>将精力集中在数据更新而不是数据传递上去</li></ul> <h2 id="localstorage-sessionstorage"><a href="#localstorage-sessionstorage" class="header-anchor">#</a> localStorage/sessionStorage</h2> <ul><li>window.localStorage.getItem/window.localStorage.setItem存取数据</li> <li>数据和状态比较混乱，不易维护</li> <li>可以结合vuex实现数据的持久保存，同时解决数据状态混乱问题</li></ul> <h2 id="attrs-listeners-隔代通信"><a href="#attrs-listeners-隔代通信" class="header-anchor">#</a> $attrs/listeners（隔代通信）</h2> <ul><li>默认情况下，父作用域中不作为 prop 被识别 (且获取) 的特性绑定 (class 和 style 除外)，将会“回退”且作为普通的HTML特性应用在子组件的根元素上，通俗地讲就是父组件中的属性传递到子组件中的props，再通过$attrs往下传递时只会传递除子组件props之外的数据，子组件通过v-on=&quot;$listeners&quot;监听孙组件的事件，相当于作为父组件和孙组件之间的一个传话筒</li></ul> <h2 id="兄弟组件通信"><a href="#兄弟组件通信" class="header-anchor">#</a> 兄弟组件通信</h2> <ul><li>中间人模式：利用父组件作为中间人传递数据</li></ul> <h2 id="注意"><a href="#注意" class="header-anchor">#</a> 注意</h2> <ul><li>props中父组件传来的属性不允许子组件随意修改，组件内部的状态（data中的变量）可以随意修改</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/stack/vue-router.html" class="prev">
        vue-router
      </a></span> <span class="next"><a href="/stack/异步更新和nextTick.html">
        vue中的$nextTick
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ffeb74c7.js" defer></script><script src="/assets/js/2.8c000b42.js" defer></script><script src="/assets/js/77.bc9764be.js" defer></script>
  </body>
</html>
