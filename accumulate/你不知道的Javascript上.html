<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1作用域是什么 | Jay&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/codecat.jpeg">
    <meta name="description" content="贾一倍的个人网站">
    
    <link rel="preload" href="/assets/css/0.styles.35bcedcf.css" as="style"><link rel="preload" href="/assets/js/app.ffeb74c7.js" as="script"><link rel="preload" href="/assets/js/2.8c000b42.js" as="script"><link rel="preload" href="/assets/js/22.eba330b8.js" as="script"><link rel="prefetch" href="/assets/js/10.d264db59.js"><link rel="prefetch" href="/assets/js/11.0bca9d9a.js"><link rel="prefetch" href="/assets/js/12.4f250ebe.js"><link rel="prefetch" href="/assets/js/13.e66cb20f.js"><link rel="prefetch" href="/assets/js/14.e9740e5f.js"><link rel="prefetch" href="/assets/js/15.77f24c1c.js"><link rel="prefetch" href="/assets/js/16.81145a00.js"><link rel="prefetch" href="/assets/js/17.fecbbc6a.js"><link rel="prefetch" href="/assets/js/18.fa64136a.js"><link rel="prefetch" href="/assets/js/19.0bf73149.js"><link rel="prefetch" href="/assets/js/20.ecf66ee0.js"><link rel="prefetch" href="/assets/js/21.9b56c347.js"><link rel="prefetch" href="/assets/js/23.cdfc8136.js"><link rel="prefetch" href="/assets/js/24.ecbff0b4.js"><link rel="prefetch" href="/assets/js/25.a765f52f.js"><link rel="prefetch" href="/assets/js/26.1df3f3be.js"><link rel="prefetch" href="/assets/js/27.6d559f57.js"><link rel="prefetch" href="/assets/js/28.44d0a27d.js"><link rel="prefetch" href="/assets/js/29.0db53b84.js"><link rel="prefetch" href="/assets/js/3.593bb0f3.js"><link rel="prefetch" href="/assets/js/30.ecd999ba.js"><link rel="prefetch" href="/assets/js/31.52600e5f.js"><link rel="prefetch" href="/assets/js/32.32943b2d.js"><link rel="prefetch" href="/assets/js/33.362f4d59.js"><link rel="prefetch" href="/assets/js/34.d0944a8e.js"><link rel="prefetch" href="/assets/js/35.bf1908ad.js"><link rel="prefetch" href="/assets/js/36.2d9be9dc.js"><link rel="prefetch" href="/assets/js/37.3358ac3c.js"><link rel="prefetch" href="/assets/js/38.bae9ecf2.js"><link rel="prefetch" href="/assets/js/39.dfcb747a.js"><link rel="prefetch" href="/assets/js/4.01f7dd6c.js"><link rel="prefetch" href="/assets/js/40.dbf6c454.js"><link rel="prefetch" href="/assets/js/41.a517905d.js"><link rel="prefetch" href="/assets/js/42.e1ae6c7e.js"><link rel="prefetch" href="/assets/js/43.c20697cd.js"><link rel="prefetch" href="/assets/js/44.d5c401fa.js"><link rel="prefetch" href="/assets/js/45.810ad2fb.js"><link rel="prefetch" href="/assets/js/46.cfe99c5e.js"><link rel="prefetch" href="/assets/js/47.32a6c154.js"><link rel="prefetch" href="/assets/js/48.be512d65.js"><link rel="prefetch" href="/assets/js/49.d36d3e6d.js"><link rel="prefetch" href="/assets/js/5.eb23ea04.js"><link rel="prefetch" href="/assets/js/50.4312a7d3.js"><link rel="prefetch" href="/assets/js/51.8db2277f.js"><link rel="prefetch" href="/assets/js/52.0ae05eb4.js"><link rel="prefetch" href="/assets/js/53.e61fc25e.js"><link rel="prefetch" href="/assets/js/54.0f5b381c.js"><link rel="prefetch" href="/assets/js/55.c7beb55c.js"><link rel="prefetch" href="/assets/js/56.97fa88fd.js"><link rel="prefetch" href="/assets/js/57.1e086f28.js"><link rel="prefetch" href="/assets/js/58.97111a0a.js"><link rel="prefetch" href="/assets/js/59.8865259a.js"><link rel="prefetch" href="/assets/js/6.516e3b20.js"><link rel="prefetch" href="/assets/js/60.0541b26f.js"><link rel="prefetch" href="/assets/js/61.624fbdfa.js"><link rel="prefetch" href="/assets/js/62.e71bbf4a.js"><link rel="prefetch" href="/assets/js/63.ad78749d.js"><link rel="prefetch" href="/assets/js/64.931d419d.js"><link rel="prefetch" href="/assets/js/65.b46213b4.js"><link rel="prefetch" href="/assets/js/66.92c8d024.js"><link rel="prefetch" href="/assets/js/67.c63280ef.js"><link rel="prefetch" href="/assets/js/68.16012c5b.js"><link rel="prefetch" href="/assets/js/69.b4a8ea96.js"><link rel="prefetch" href="/assets/js/7.c7625e6b.js"><link rel="prefetch" href="/assets/js/70.c03c3735.js"><link rel="prefetch" href="/assets/js/71.76491655.js"><link rel="prefetch" href="/assets/js/72.ab24e160.js"><link rel="prefetch" href="/assets/js/73.9026af07.js"><link rel="prefetch" href="/assets/js/74.8f925ea4.js"><link rel="prefetch" href="/assets/js/75.8c3d4d08.js"><link rel="prefetch" href="/assets/js/76.2e25789c.js"><link rel="prefetch" href="/assets/js/77.bc9764be.js"><link rel="prefetch" href="/assets/js/78.d13a2495.js"><link rel="prefetch" href="/assets/js/8.80450da7.js"><link rel="prefetch" href="/assets/js/9.dd8d6c7c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35bcedcf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Jay's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/accumulate/" class="nav-link router-link-active">
  前端基础
</a></div><div class="nav-item"><a href="/stack/" class="nav-link">
  技术栈
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  计算机网络
</a></div><div class="nav-item"><a href="/optimize/" class="nav-link">
  优化
</a></div><div class="nav-item"><a href="/c++/" class="nav-link">
  c++
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/accumulate/" class="nav-link router-link-active">
  前端基础
</a></div><div class="nav-item"><a href="/stack/" class="nav-link">
  技术栈
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  计算机网络
</a></div><div class="nav-item"><a href="/optimize/" class="nav-link">
  优化
</a></div><div class="nav-item"><a href="/c++/" class="nav-link">
  c++
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Accumulate</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/accumulate/" aria-current="page" class="sidebar-link">前端基础</a></li><li><a href="/accumulate/CSS.html" class="sidebar-link">块、行内和行内块</a></li><li><a href="/accumulate/H5离线缓存.html" class="sidebar-link">H5离线缓存（应用程序缓存）Deprecated</a></li><li><a href="/accumulate/JS.html" class="sidebar-link">lodash</a></li><li><a href="/accumulate/JS手写.html" class="sidebar-link">new、call、apply实现</a></li><li><a href="/accumulate/Node.html" class="sidebar-link">Node</a></li><li><a href="/accumulate/Typescript.html" class="sidebar-link">基础类型</a></li><li><a href="/accumulate/URL到页面.html" class="sidebar-link">判断是搜索还是网址</a></li><li><a href="/accumulate/VScode.html" class="sidebar-link">eslint</a></li><li><a href="/accumulate/canvas和svg.html" class="sidebar-link">canvas</a></li><li><a href="/accumulate/electron.html" class="sidebar-link">app</a></li><li><a href="/accumulate/meta标签.html" class="sidebar-link">meta</a></li><li><a href="/accumulate/位运算.html" class="sidebar-link">有符号整数和无符号整数</a></li><li><a href="/accumulate/你不知道的Javascript上.html" class="active sidebar-link">1作用域是什么</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#编译原理" class="sidebar-link">编译原理</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#作用域" class="sidebar-link">作用域</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#lhs-rhs" class="sidebar-link">LHS&amp;RHS</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#作用域链" class="sidebar-link">作用域链</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#查询异常" class="sidebar-link">查询异常</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#词法阶段" class="sidebar-link">词法阶段</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#欺骗词法" class="sidebar-link">欺骗词法</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#函数作用域" class="sidebar-link">函数作用域</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#隐藏内部实现" class="sidebar-link">隐藏内部实现</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#函数带来的一些问题" class="sidebar-link">函数带来的一些问题</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#块作用域" class="sidebar-link">块作用域</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#模块" class="sidebar-link">模块</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#动态作用域" class="sidebar-link">动态作用域</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#this词法" class="sidebar-link">this词法</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#调用位置" class="sidebar-link">调用位置</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#绑定规则" class="sidebar-link">绑定规则</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#优先级" class="sidebar-link">优先级</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#bind柯里化" class="sidebar-link">bind柯里化</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#绑定例外" class="sidebar-link">绑定例外</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#软绑定" class="sidebar-link">软绑定</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#this词法-2" class="sidebar-link">this词法</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#属性访问和键访问" class="sidebar-link">属性访问和键访问</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#深拷贝和浅拷贝" class="sidebar-link">深拷贝和浅拷贝</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#浅不变性" class="sidebar-link">浅不变性</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#存在性" class="sidebar-link">存在性</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#枚举" class="sidebar-link">枚举</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#遍历" class="sidebar-link">遍历</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#属性设置和屏蔽" class="sidebar-link">属性设置和屏蔽</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#类-函数" class="sidebar-link">“类”函数</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#继承" class="sidebar-link">继承</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#检查类关系" class="sidebar-link">检查类关系</a></li><li class="sidebar-sub-header"><a href="/accumulate/你不知道的Javascript上.html#面向对象和对象关联" class="sidebar-link">面向对象和对象关联</a></li></ul></li><li><a href="/accumulate/你不知道的Javascript中.html" class="sidebar-link">1类型</a></li><li><a href="/accumulate/创建对象和对象继承.html" class="sidebar-link">创建对象方式：</a></li><li><a href="/accumulate/初识webpack.html" class="sidebar-link">webpack</a></li><li><a href="/accumulate/前端路由.html" class="sidebar-link">参考《SPA 路由三部曲之核心原理》</a></li><li><a href="/accumulate/动画.html" class="sidebar-link">GIF</a></li><li><a href="/accumulate/垃圾回收机制.html" class="sidebar-link">garbage collection</a></li><li><a href="/accumulate/新词.html" class="sidebar-link">这个文档用来记录一些新鲜词汇</a></li><li><a href="/accumulate/模块化.html" class="sidebar-link">commonJS</a></li><li><a href="/accumulate/正则表达式.html" class="sidebar-link">Regular Expression</a></li><li><a href="/accumulate/虚拟列表.html" class="sidebar-link">虚拟列表</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_1作用域是什么"><a href="#_1作用域是什么" class="header-anchor">#</a> 1作用域是什么</h1> <ul><li>我的理解是在程序执行执行过程中，可以访问到的变量或者函数所在的一个区域</li></ul> <h2 id="编译原理"><a href="#编译原理" class="header-anchor">#</a> 编译原理</h2> <ul><li>发生在代码执行之前</li></ul> <ol><li>词法分析：将字符串分解为词法单元</li> <li>语法分析：将词法单元数组转换为抽象语法树</li> <li>代码生成：将AST转换为可执行代码</li></ol> <h2 id="作用域"><a href="#作用域" class="header-anchor">#</a> 作用域</h2> <ul><li>负责收集并维护由所有声明的标识符组成的一系列<strong>查询</strong>（js引擎在执行代码的过程中会通过作用域来查询标识符的访问权限），并确定当前执行的代码对于这些标识符的访问权限</li></ul> <h2 id="lhs-rhs"><a href="#lhs-rhs" class="header-anchor">#</a> LHS&amp;RHS</h2> <ul><li>LHS：查找赋值操作的目标，为了给变量赋值</li> <li>RHS：查找赋值操作的源头，为了获取变量的值</li></ul> <h2 id="作用域链"><a href="#作用域链" class="header-anchor">#</a> 作用域链</h2> <h2 id="查询异常"><a href="#查询异常" class="header-anchor">#</a> 查询异常</h2> <p>非严格模式下，</p> <ul><li>RHS找不到变量，抛出RefereceRerror</li> <li>LHS找不到变量，会在全局作用域中创建一个同名变量</li></ul> <p>严格模式下，均会抛出RefereceRerror</p> <hr> <h1 id="_2词法作用域"><a href="#_2词法作用域" class="header-anchor">#</a> 2词法作用域</h1> <ul><li>作用域有两种主要的工作模型：词法作用域和动态作用域</li></ul> <h2 id="词法阶段"><a href="#词法阶段" class="header-anchor">#</a> 词法阶段</h2> <ul><li>词法作用域：定义在词法阶段的作用域，由变量和块作用域在代码中的位置决定</li> <li>作用域查找会在找到第一个匹配的标识符时停止，同名标识符形成遮蔽效应</li></ul> <h2 id="欺骗词法"><a href="#欺骗词法" class="header-anchor">#</a> 欺骗词法</h2> <ul><li>eval：执行js语句，如同它就写在这里一样</li> <li>with：将一个对象处理为新的词法作用域</li></ul> <h1 id="_3函数作用域和块作用域"><a href="#_3函数作用域和块作用域" class="header-anchor">#</a> 3函数作用域和块作用域</h1> <h2 id="函数作用域"><a href="#函数作用域" class="header-anchor">#</a> 函数作用域</h2> <ul><li>函数作用域：属于这个函数的全部变量都可以在整个函数的范围内使用及复用</li></ul> <h2 id="隐藏内部实现"><a href="#隐藏内部实现" class="header-anchor">#</a> 隐藏内部实现</h2> <ul><li>利用函数作用域的特性隐藏私有的变量或函数</li> <li>避免同名标识符之间的冲突</li></ul> <h2 id="函数带来的一些问题"><a href="#函数带来的一些问题" class="header-anchor">#</a> 函数带来的一些问题</h2> <ul><li>必须声明一个具名函数，污染外部作用域</li> <li>必须通过函数名进行显式调用</li></ul> <h3 id="匿名函数表达式"><a href="#匿名函数表达式" class="header-anchor">#</a> 匿名函数表达式</h3> <p>缺点：</p> <ul><li>栈追踪中不显示函数名，调试困难</li> <li>调用自身时只能使用过期的arguments.callee</li> <li>降低代码可读性</li></ul> <h3 id="立即执行函数表达式"><a href="#立即执行函数表达式" class="header-anchor">#</a> 立即执行函数表达式</h3> <h2 id="块作用域"><a href="#块作用域" class="header-anchor">#</a> 块作用域</h2> <ul><li>with</li> <li>try/catch</li> <li>let</li> <li>const</li></ul> <h1 id="_4提升"><a href="#_4提升" class="header-anchor">#</a> 4提升</h1> <ul><li><p>定义声明和赋值声明</p></li> <li><p>var变量定义声明提升到作用域的最顶端</p></li> <li><p>函数声明会被提升，函数表达式不会被提升</p></li> <li><p>重复声明中，函数声明会比变量先一步被提升</p></li></ul> <h1 id="_5作用域闭包"><a href="#_5作用域闭包" class="header-anchor">#</a> 5作用域闭包</h1> <ul><li>闭包：通常函数执行结束，函数作用域也会跟着消失，当函数可以记住并访问所在的词法作用域，就产生了闭包，即使函数是在当前词法作用域之外执行</li> <li>闭包其实就是对函数所在词法作用域的引用</li> <li>阻止垃圾回收</li> <li>使用回调函数就是在使用闭包</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用IIFE</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用let</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 使用bind </span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>console<span class="token punctuation">.</span>log<span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">,</span> i <span class="token operator">*</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>立即调用函数会生成一个新的作用域</p> <p>let可以用来劫持块作用域</p> <h2 id="模块"><a href="#模块" class="header-anchor">#</a> 模块</h2> <ul><li>调用包装了函数定义的包装函数</li> <li>将返回值作为该模块的API</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">CoolModule</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> something <span class="token operator">=</span> <span class="token string">&quot;cool&quot;</span>
    <span class="token keyword">let</span> another <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span>
    
    <span class="token keyword">function</span> <span class="token function">doSomething</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>something<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">function</span> <span class="token function">doAnother</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>another<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 这里返回的对象含有对内部函数的引用</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        doSomething<span class="token punctuation">,</span>
        doAnother
    <span class="token punctuation">}</span>  
<span class="token punctuation">}</span>

<span class="token keyword">let</span> foo  <span class="token operator">=</span> <span class="token function">CoolModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 这两个函数就具有了模块实例内部作用域的闭包</span>
foo<span class="token punctuation">.</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
foo<span class="token punctuation">.</span><span class="token function">doAnother</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>基于函数的模块不能被静态识别（编译器无法识别），运行时才会被当作API，而且运行时可以修改API</li> <li>基于文件的ES6模块是静态的，API不会在运行时改变，编译器在编译时就可以对导入模块的API引用进行检查</li></ul> <h2 id="动态作用域"><a href="#动态作用域" class="header-anchor">#</a> 动态作用域</h2> <ul><li>动态作用域链基于调用栈</li> <li>词法作用域链基于作用域嵌套</li></ul> <h2 id="this词法"><a href="#this词法" class="header-anchor">#</a> this词法</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
    <span class="token function-variable function">cool</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">coolFn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> id <span class="token operator">=</span> <span class="token number">456</span>
<span class="token comment">// 这里this指向window</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span>obj<span class="token punctuation">.</span>cool<span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span><span class="token function">cool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// 456</span>

<span class="token comment">// 利用闭包保留词法作用域，回调函数仍然可以访问到self即指向obj</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
    <span class="token function-variable function">cool</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">coolFn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>self<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> id <span class="token operator">=</span> <span class="token number">456</span>
obj<span class="token punctuation">.</span><span class="token function">cool</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 123</span>

<span class="token comment">// 箭头函数中的this始终继承外层函数的this绑定</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
    <span class="token function-variable function">cool</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">coolFn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> self <span class="token operator">=</span> <span class="token keyword">this</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> id <span class="token operator">=</span> <span class="token number">456</span>
obj<span class="token punctuation">.</span><span class="token function">cool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 利用bind将this绑定到</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
    <span class="token function-variable function">cool</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token function">coolFn</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">timer</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>id<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> id <span class="token operator">=</span> <span class="token number">456</span>
obj<span class="token punctuation">.</span><span class="token function">cool</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h1 id="_1关于this"><a href="#_1关于this" class="header-anchor">#</a> 1关于this</h1> <ul><li>既不指向函数自身，也不指向函数的词法作用域。</li> <li>在函数被调用时发生的绑定，指向完全取决于函数在哪里被调用</li></ul> <h1 id="_2this全面解析"><a href="#_2this全面解析" class="header-anchor">#</a> 2this全面解析</h1> <ul><li>this通常在函数中，指向函数的调用位置</li></ul> <h2 id="调用位置"><a href="#调用位置" class="header-anchor">#</a> 调用位置</h2> <ul><li>函数被调用的位置</li></ul> <h2 id="绑定规则"><a href="#绑定规则" class="header-anchor">#</a> 绑定规则</h2> <h3 id="默认绑定"><a href="#默认绑定" class="header-anchor">#</a> 默认绑定</h3> <ul><li>独立函数调用：非严格模式下，this指向全局对象；严格模式下，this指向undefined</li></ul> <h3 id="隐式绑定"><a href="#隐式绑定" class="header-anchor">#</a> 隐式绑定</h3> <ul><li>当函数引用有上下文对象时，隐式绑定规则会把函数调用中的this绑定到这个上下文对象</li></ul> <h3 id="显式绑定"><a href="#显式绑定" class="header-anchor">#</a> 显式绑定</h3> <ul><li>call、apply指定函数的this绑定</li> <li>硬绑定：bind</li></ul> <h3 id="new绑定"><a href="#new绑定" class="header-anchor">#</a> new绑定</h3> <ul><li>使用new来调用函数会构造一个新对象并把它绑定到构造函数调用中的this上（即构造函数中的this就指向这个新对象）</li></ul> <h2 id="优先级"><a href="#优先级" class="header-anchor">#</a> 优先级</h2> <p>new绑定 &gt; 显式绑定 &gt; 隐式绑定 &gt; 默认绑定</p> <h2 id="bind柯里化"><a href="#bind柯里化" class="header-anchor">#</a> bind柯里化</h2> <h2 id="绑定例外"><a href="#绑定例外" class="header-anchor">#</a> 绑定例外</h2> <ul><li>如果传入call、apply、bind 的绑定对象为null或undefined，则应用默认绑定规则</li> <li>因为默认绑定会把this绑定到全局对象，为了避免这一情况可以传入一个空对象，通过Object.create(null)创建一个比{}更空的空对象，因为它<strong>不会创建Object.prototype这个委托</strong></li> <li>调用函数的间接引用会应用默认绑定规则</li></ul> <h2 id="软绑定"><a href="#软绑定" class="header-anchor">#</a> 软绑定</h2> <h2 id="this词法-2"><a href="#this词法-2" class="header-anchor">#</a> this词法</h2> <ul><li>箭头函数根据外层（函数或全局）作用域来决定this</li> <li>箭头函数的绑定无法被修改</li></ul> <h1 id="_3对象"><a href="#_3对象" class="header-anchor">#</a> 3对象</h1> <ul><li><p>null之所以typeof为object是因为，不同对象在底层都表示为二进制，在js中二进制前三位为0的话就会判断为object，null的二进制表示全为0，所以也会返回object</p></li> <li><p>简单基本类型：string、number、boolean、null、undefined、object</p></li> <li><p>内置对象（对象子类型）：String、Number、Boolean、Function、Array、Object、Date、RegExp、Error</p></li> <li><p>对基本类型为字符串的字面量进行获取长度、访问某个字符等操作时，需要将其先转换为String对象</p></li></ul> <h2 id="属性访问和键访问"><a href="#属性访问和键访问" class="header-anchor">#</a> 属性访问和键访问</h2> <ul><li>.操作符语法为属性访问，要求属性名满足标识符的命名规范</li> <li>[]操作符语法为键访问，可以接受任意UTF-8字符串作为属性名</li></ul> <hr> <ul><li>对象属性名永远是字符串</li></ul> <h2 id="深拷贝和浅拷贝"><a href="#深拷贝和浅拷贝" class="header-anchor">#</a> 深拷贝和浅拷贝</h2> <ul><li>JSON.parse和JSON.stringify</li> <li>Object.assign复制所有可枚举的自有键，对象属性的特性不可枚举所以不会被复制</li> <li>即使configurable是false，<strong>仍然可以把writable由true改为false</strong>，但无法由false改为true</li></ul> <h2 id="浅不变性"><a href="#浅不变性" class="header-anchor">#</a> 浅不变性</h2> <ul><li>writable：false和configurable：false创建一个不可修改、重定义或者删除的常量属性</li> <li>Object.preventExtensions()禁止对象添加属性并保留已有属性，已有属性可以修改</li> <li>Object.seal()：调用Object.preventExtensions()并把所有属性设为configurable：false，这种情况下仍可以修改属性的值</li> <li>Object.freeze()调用Object.seal()并把所有数据访问属性设为writable：false</li></ul> <h2 id="存在性"><a href="#存在性" class="header-anchor">#</a> 存在性</h2> <ul><li>判断对象是否存在某个属性</li> <li>hasOwnProperty：只会检查属性是否在对象中，hasOwnProperty是Object.prototype上的方法，但有的对象没有连接到Object.prototype（Object.create(null)），这时就要用Object.prototype.hasOwnProperty.call(someObject, &quot;属性&quot;)</li> <li>in：检查属性是否在对象及其原型链中</li></ul> <h2 id="枚举"><a href="#枚举" class="header-anchor">#</a> 枚举</h2> <ul><li>propertyIsEnumberable：检查给定属性名是否直接存在对象中（而不是在原型链上）并满足enumerable：true</li> <li>Object.keys()：返回一个数组，对象直接包含的所有可枚举属性</li> <li>Object.getOwnPropertyNames()：返回一个数组，对象直接包含所有属性，无论是否可枚举</li></ul> <h2 id="遍历"><a href="#遍历" class="header-anchor">#</a> 遍历</h2> <ul><li>some()、every()中特殊的返回值会<strong>提前终止遍历</strong></li> <li>对象本身定义了迭代器才能使用for...of遍历值，for..of首先会向被访问对象请求一个迭代器对象，然后调用迭代器对象的next()方法遍历所有值</li> <li>使用Symbol.iterator获取对象的@@iterator内部属性，属性值为一个返回迭代器对象的函数</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> myObject <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">a</span><span class="token operator">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
    <span class="token literal-property property">b</span><span class="token operator">:</span> <span class="token number">3</span>
<span class="token punctuation">}</span>

Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>myObject<span class="token punctuation">,</span> Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">enumerable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">writable</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
    <span class="token literal-property property">configurable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
    <span class="token function-variable function">value</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> id <span class="token operator">=</span> <span class="token number">0</span>
        <span class="token keyword">let</span> keyArr <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            <span class="token function-variable function">next</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token punctuation">{</span>
                    <span class="token literal-property property">value</span><span class="token operator">:</span> <span class="token keyword">this</span><span class="token punctuation">[</span>keyArr<span class="token punctuation">[</span>id<span class="token operator">++</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">done</span><span class="token operator">:</span> <span class="token punctuation">(</span>id <span class="token operator">&gt;</span> keyArr<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> value <span class="token keyword">of</span> myObject<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token comment">// 2   3</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="_4混合对象-类"><a href="#_4混合对象-类" class="header-anchor">#</a> 4混合对象“类”</h1> <ul><li>js不会像类那样自动创建对象的副本</li> <li>在js中模拟类得不偿失</li> <li>继承意味着复制操作，js默认不会复制对象属性，而是在两个对象之间创建一个关联，这样一个对象就可以通过关联访问另一个对象的属性和函数</li></ul> <h1 id="_5原型"><a href="#_5原型" class="header-anchor">#</a> 5原型</h1> <h2 id="属性设置和屏蔽"><a href="#属性设置和屏蔽" class="header-anchor">#</a> 属性设置和屏蔽</h2> <p>给一个对象设置属性：</p> <ul><li>属性存在于对象中：只修改已有属性值</li> <li>属性不在对象中而存在原型链上层会出现三种情况：
<ol><li>属性writable为true，直接在对象中添加同名属性</li> <li>属性writable为false，赋值操作被忽略</li> <li>属性是一个setter，会调用这个setter，不会将属性添加到对象</li></ol></li> <li>属性不在对象中也不在原型链中，对象添加一个新属性</li></ul> <h2 id="类-函数"><a href="#类-函数" class="header-anchor">#</a> “类”函数</h2> <ul><li>函数的特殊特性：所有函数默认拥有一个名为prototype的公共且不可枚举的属性，指向另一个对象</li> <li>构造函数并不是真正的构造函数，而是带new 的函数调用</li> <li>Foo.prototype有一个公有且不可枚举的属性.constructor，所以实例并美哟.constructor属性，所以会通过原型链找到.constructor</li></ul> <h2 id="继承"><a href="#继承" class="header-anchor">#</a> 继承</h2> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
<span class="token punctuation">}</span>

<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myName</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>name
<span class="token punctuation">}</span>
<span class="token comment">// 创建一个新的Bar.prototype对象并把它关联到Foo.prototype</span>
<span class="token class-name">Bar</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> Oject<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>

<span class="token keyword">function</span> <span class="token function">Bar</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> label</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">Foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>label <span class="token operator">=</span> label
<span class="token punctuation">}</span>

<span class="token class-name">Bar</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">myLabel</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>label
<span class="token punctuation">}</span>

<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bar</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;obj a&quot;</span><span class="token punctuation">)</span>
a<span class="token punctuation">.</span><span class="token function">myName</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// &quot;a&quot;</span>
a<span class="token punctuation">.</span><span class="token function">myLabel</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// &quot;obj a&quot;</span>


</code></pre></div><p>把Bar.prototype关联到Foo.prototype的：</p> <ul><li>Object.create创建一个新对象，并把它关联到指定对象</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Object<span class="token punctuation">.</span>create<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Object<span class="token punctuation">.</span><span class="token function-variable function">create</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">o</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">function</span> <span class="token constant">F</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
        <span class="token class-name">F</span><span class="token punctuation">.</span>prototype <span class="token operator">=</span> o
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">F</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Object.setPrototypeOf(Bar.prototype, Foo.prototype)</li></ul> <h2 id="检查类关系"><a href="#检查类关系" class="header-anchor">#</a> 检查类关系</h2> <ul><li>instanceof，左操作数是一个普通对象，右操作数是一个函数，如果该对象的原型链中有函数的prototype属性指向的对象就返回true，所以这个方法只能处理对象和函数（带.prototype引用）之间的关系</li> <li>isPrototypeOf，左右操作数均为对象</li> <li>Object.getPrototypeOf</li> <li>_ <em>proto</em> _，实际上并不存在于实例对象中，而是存在于内置的Object.prototype中，访问时，实际是调用了Object.getPrototypeOf</li></ul> <h1 id="_6行为委托"><a href="#_6行为委托" class="header-anchor">#</a> 6行为委托</h1> <h2 id="面向对象和对象关联"><a href="#面向对象和对象关联" class="header-anchor">#</a> 面向对象和对象关联</h2> <ul><li>[[prototype]]机制指对象中的一个内部链接引用另一个对象，换句话说，本质就是对象之间的关联关系</li></ul> <h3 id="面向对象"><a href="#面向对象" class="header-anchor">#</a> 面向对象</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Foo</span> <span class="token punctuation">(</span><span class="token parameter">who</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>me <span class="token operator">=</span> who
<span class="token punctuation">}</span>
<span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">identify</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>me
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">Bar</span> <span class="token punctuation">(</span><span class="token parameter">who</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">Foo</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> who<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
Bar<span class="token punctuation">.</span>prototpe <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token class-name">Foo</span><span class="token punctuation">.</span>prototype<span class="token punctuation">)</span>
<span class="token class-name">Bar</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">speak</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">identify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> b1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Bar</span><span class="token punctuation">(</span><span class="token string">&quot;b1&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="对象关联"><a href="#对象关联" class="header-anchor">#</a> 对象关联</h3> <div class="language-js extra-class"><pre class="language-js"><code>Foo <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function">init</span> <span class="token punctuation">(</span><span class="token parameter">who</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>me <span class="token operator">=</span> who
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function">identify</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>me
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

Bar <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Foo<span class="token punctuation">)</span>
Bar<span class="token punctuation">.</span><span class="token function-variable function">speak</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">identify</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> b1 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">create</span><span class="token punctuation">(</span>Bar<span class="token punctuation">)</span>
b1<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token string">&quot;b1&quot;</span><span class="token punctuation">)</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/accumulate/位运算.html" class="prev">
        有符号整数和无符号整数
      </a></span> <span class="next"><a href="/accumulate/你不知道的Javascript中.html">
        1类型
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ffeb74c7.js" defer></script><script src="/assets/js/2.8c000b42.js" defer></script><script src="/assets/js/22.eba330b8.js" defer></script>
  </body>
</html>
