<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>lodash | Jay&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/codecat.jpeg">
    <meta name="description" content="贾一倍的个人网站">
    
    <link rel="preload" href="/assets/css/0.styles.35bcedcf.css" as="style"><link rel="preload" href="/assets/js/app.ffeb74c7.js" as="script"><link rel="preload" href="/assets/js/2.8c000b42.js" as="script"><link rel="preload" href="/assets/js/11.0bca9d9a.js" as="script"><link rel="prefetch" href="/assets/js/10.d264db59.js"><link rel="prefetch" href="/assets/js/12.4f250ebe.js"><link rel="prefetch" href="/assets/js/13.e66cb20f.js"><link rel="prefetch" href="/assets/js/14.e9740e5f.js"><link rel="prefetch" href="/assets/js/15.77f24c1c.js"><link rel="prefetch" href="/assets/js/16.81145a00.js"><link rel="prefetch" href="/assets/js/17.fecbbc6a.js"><link rel="prefetch" href="/assets/js/18.fa64136a.js"><link rel="prefetch" href="/assets/js/19.0bf73149.js"><link rel="prefetch" href="/assets/js/20.ecf66ee0.js"><link rel="prefetch" href="/assets/js/21.9b56c347.js"><link rel="prefetch" href="/assets/js/22.eba330b8.js"><link rel="prefetch" href="/assets/js/23.cdfc8136.js"><link rel="prefetch" href="/assets/js/24.ecbff0b4.js"><link rel="prefetch" href="/assets/js/25.a765f52f.js"><link rel="prefetch" href="/assets/js/26.1df3f3be.js"><link rel="prefetch" href="/assets/js/27.6d559f57.js"><link rel="prefetch" href="/assets/js/28.44d0a27d.js"><link rel="prefetch" href="/assets/js/29.0db53b84.js"><link rel="prefetch" href="/assets/js/3.593bb0f3.js"><link rel="prefetch" href="/assets/js/30.ecd999ba.js"><link rel="prefetch" href="/assets/js/31.52600e5f.js"><link rel="prefetch" href="/assets/js/32.32943b2d.js"><link rel="prefetch" href="/assets/js/33.362f4d59.js"><link rel="prefetch" href="/assets/js/34.d0944a8e.js"><link rel="prefetch" href="/assets/js/35.bf1908ad.js"><link rel="prefetch" href="/assets/js/36.2d9be9dc.js"><link rel="prefetch" href="/assets/js/37.3358ac3c.js"><link rel="prefetch" href="/assets/js/38.bae9ecf2.js"><link rel="prefetch" href="/assets/js/39.dfcb747a.js"><link rel="prefetch" href="/assets/js/4.01f7dd6c.js"><link rel="prefetch" href="/assets/js/40.dbf6c454.js"><link rel="prefetch" href="/assets/js/41.a517905d.js"><link rel="prefetch" href="/assets/js/42.e1ae6c7e.js"><link rel="prefetch" href="/assets/js/43.c20697cd.js"><link rel="prefetch" href="/assets/js/44.d5c401fa.js"><link rel="prefetch" href="/assets/js/45.810ad2fb.js"><link rel="prefetch" href="/assets/js/46.cfe99c5e.js"><link rel="prefetch" href="/assets/js/47.32a6c154.js"><link rel="prefetch" href="/assets/js/48.be512d65.js"><link rel="prefetch" href="/assets/js/49.d36d3e6d.js"><link rel="prefetch" href="/assets/js/5.eb23ea04.js"><link rel="prefetch" href="/assets/js/50.4312a7d3.js"><link rel="prefetch" href="/assets/js/51.8db2277f.js"><link rel="prefetch" href="/assets/js/52.0ae05eb4.js"><link rel="prefetch" href="/assets/js/53.e61fc25e.js"><link rel="prefetch" href="/assets/js/54.0f5b381c.js"><link rel="prefetch" href="/assets/js/55.c7beb55c.js"><link rel="prefetch" href="/assets/js/56.97fa88fd.js"><link rel="prefetch" href="/assets/js/57.1e086f28.js"><link rel="prefetch" href="/assets/js/58.97111a0a.js"><link rel="prefetch" href="/assets/js/59.8865259a.js"><link rel="prefetch" href="/assets/js/6.516e3b20.js"><link rel="prefetch" href="/assets/js/60.0541b26f.js"><link rel="prefetch" href="/assets/js/61.624fbdfa.js"><link rel="prefetch" href="/assets/js/62.e71bbf4a.js"><link rel="prefetch" href="/assets/js/63.ad78749d.js"><link rel="prefetch" href="/assets/js/64.931d419d.js"><link rel="prefetch" href="/assets/js/65.b46213b4.js"><link rel="prefetch" href="/assets/js/66.92c8d024.js"><link rel="prefetch" href="/assets/js/67.c63280ef.js"><link rel="prefetch" href="/assets/js/68.16012c5b.js"><link rel="prefetch" href="/assets/js/69.b4a8ea96.js"><link rel="prefetch" href="/assets/js/7.c7625e6b.js"><link rel="prefetch" href="/assets/js/70.c03c3735.js"><link rel="prefetch" href="/assets/js/71.76491655.js"><link rel="prefetch" href="/assets/js/72.ab24e160.js"><link rel="prefetch" href="/assets/js/73.9026af07.js"><link rel="prefetch" href="/assets/js/74.8f925ea4.js"><link rel="prefetch" href="/assets/js/75.8c3d4d08.js"><link rel="prefetch" href="/assets/js/76.2e25789c.js"><link rel="prefetch" href="/assets/js/77.bc9764be.js"><link rel="prefetch" href="/assets/js/78.d13a2495.js"><link rel="prefetch" href="/assets/js/8.80450da7.js"><link rel="prefetch" href="/assets/js/9.dd8d6c7c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35bcedcf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Jay's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/accumulate/" class="nav-link router-link-active">
  前端基础
</a></div><div class="nav-item"><a href="/stack/" class="nav-link">
  技术栈
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  计算机网络
</a></div><div class="nav-item"><a href="/optimize/" class="nav-link">
  优化
</a></div><div class="nav-item"><a href="/c++/" class="nav-link">
  c++
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/accumulate/" class="nav-link router-link-active">
  前端基础
</a></div><div class="nav-item"><a href="/stack/" class="nav-link">
  技术栈
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  计算机网络
</a></div><div class="nav-item"><a href="/optimize/" class="nav-link">
  优化
</a></div><div class="nav-item"><a href="/c++/" class="nav-link">
  c++
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Accumulate</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/accumulate/" aria-current="page" class="sidebar-link">前端基础</a></li><li><a href="/accumulate/CSS.html" class="sidebar-link">块、行内和行内块</a></li><li><a href="/accumulate/H5离线缓存.html" class="sidebar-link">H5离线缓存（应用程序缓存）Deprecated</a></li><li><a href="/accumulate/JS.html" aria-current="page" class="active sidebar-link">lodash</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/accumulate/JS.html#lodash" class="sidebar-link">lodash</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#reduce" class="sidebar-link">reduce</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#json-stringify-value-replacer-space-将对象或数组转化为字符串" class="sidebar-link">JSON.stringify(value, replacer, space)将对象或数组转化为字符串</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#事件循环机制" class="sidebar-link">事件循环机制</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#执行上下文" class="sidebar-link">执行上下文</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#函数调用栈" class="sidebar-link">函数调用栈</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#promise引用类型" class="sidebar-link">Promise引用类型</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#异步函数" class="sidebar-link">异步函数</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#google-布尔搜索" class="sidebar-link">Google 布尔搜索</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#localstorage、sessionstorage、cookie、session" class="sidebar-link">localStorage、sessionStorage、cookie、session</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#cnosole-log-string-或-object" class="sidebar-link">cnosole.log( String 或 Object )</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#字符串转number" class="sidebar-link">“+”   字符串转number</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#js代码简化" class="sidebar-link">JS代码简化</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#函数式编程" class="sidebar-link">函数式编程</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#xml-json" class="sidebar-link">XML &amp; JSON</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#异步" class="sidebar-link">异步</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#函数调用" class="sidebar-link">函数调用</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#惰性求值" class="sidebar-link">惰性求值</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#冒泡与捕获" class="sidebar-link">冒泡与捕获</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#深浅拷贝" class="sidebar-link">深浅拷贝</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#async-ə-zɪŋk-await" class="sidebar-link">async[ə'zɪŋk]/await</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#input文本框内的事件" class="sidebar-link">input文本框内的事件</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#weakmap" class="sidebar-link">WeakMap</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#for-in-for-of" class="sidebar-link">for in &amp; for of</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#object-is" class="sidebar-link">Object.is</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#包装类" class="sidebar-link">包装类</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#nodejs模拟oj" class="sidebar-link">Nodejs模拟OJ</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#什么时候不能使用箭头函数" class="sidebar-link">什么时候不能使用箭头函数</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#es6-class" class="sidebar-link">ES6 class</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#function-apply-bind-function-bind-apply" class="sidebar-link">Function.apply.bind&amp;Function.bind.apply</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#ajax" class="sidebar-link">Ajax</a></li><li class="sidebar-sub-header"><a href="/accumulate/JS.html#支持promise-的generator-runner" class="sidebar-link">支持Promise 的Generator Runner</a></li></ul></li><li><a href="/accumulate/JS手写.html" class="sidebar-link">new、call、apply实现</a></li><li><a href="/accumulate/Node.html" class="sidebar-link">Node</a></li><li><a href="/accumulate/Typescript.html" class="sidebar-link">基础类型</a></li><li><a href="/accumulate/URL到页面.html" class="sidebar-link">判断是搜索还是网址</a></li><li><a href="/accumulate/VScode.html" class="sidebar-link">eslint</a></li><li><a href="/accumulate/canvas和svg.html" class="sidebar-link">canvas</a></li><li><a href="/accumulate/electron.html" class="sidebar-link">app</a></li><li><a href="/accumulate/meta标签.html" class="sidebar-link">meta</a></li><li><a href="/accumulate/位运算.html" class="sidebar-link">有符号整数和无符号整数</a></li><li><a href="/accumulate/你不知道的Javascript上.html" class="sidebar-link">1作用域是什么</a></li><li><a href="/accumulate/你不知道的Javascript中.html" class="sidebar-link">1类型</a></li><li><a href="/accumulate/创建对象和对象继承.html" class="sidebar-link">创建对象方式：</a></li><li><a href="/accumulate/初识webpack.html" class="sidebar-link">webpack</a></li><li><a href="/accumulate/前端路由.html" class="sidebar-link">参考《SPA 路由三部曲之核心原理》</a></li><li><a href="/accumulate/动画.html" class="sidebar-link">GIF</a></li><li><a href="/accumulate/垃圾回收机制.html" class="sidebar-link">garbage collection</a></li><li><a href="/accumulate/新词.html" class="sidebar-link">这个文档用来记录一些新鲜词汇</a></li><li><a href="/accumulate/模块化.html" class="sidebar-link">commonJS</a></li><li><a href="/accumulate/正则表达式.html" class="sidebar-link">Regular Expression</a></li><li><a href="/accumulate/虚拟列表.html" class="sidebar-link">虚拟列表</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="lodash"><a href="#lodash" class="header-anchor">#</a> <strong>lodash</strong></h2> <ul><li>遍历 array、object 和 string</li> <li>对值进行操作和检测</li> <li>创建符合功能的函数</li></ul> <hr> <h2 id="reduce"><a href="#reduce" class="header-anchor">#</a> <strong>reduce</strong></h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code>array<span class="token punctuation">.</span><span class="token function">reduce</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">total<span class="token punctuation">,</span> currentValue<span class="token punctuation">,</span> currentIndex<span class="token punctuation">,</span> arr</span><span class="token punctuation">)</span><span class="token punctuation">,</span> initialValue<span class="token punctuation">)</span>
</code></pre></div><p><strong>function</strong>为累计器函数，对数组的每个元素求值并累加到<strong>total</strong>上</p> <ul><li><strong>total</strong>为初始值或计算结束的返回值</li> <li><strong>initialValue</strong>为传递给函数的初始值</li></ul> <hr> <h2 id="json-stringify-value-replacer-space-将对象或数组转化为字符串"><a href="#json-stringify-value-replacer-space-将对象或数组转化为字符串" class="header-anchor">#</a> <strong>JSON.stringify(value, replacer, space)将对象或数组转化为字符串</strong></h2> <ul><li><strong>value</strong>为要转换的对象或数组</li> <li><strong>replacer</strong>用于对成员进行处理</li> <li><strong>space</strong>可以缩进换行等</li></ul> <hr> <h2 id="事件循环机制"><a href="#事件循环机制" class="header-anchor">#</a> <strong>事件循环机制</strong></h2> <p>同步任务先在主线程中执行，执行完毕后会到任务队列读取异步任务到主线程中执行。</p> <p>异步任务进入Event Table并<strong>注册回调函数</strong>，当异步任务完成时，Event Table会将回调函数移入任务队列（Event Queue），<strong>宏任务、微任务皆为异步任务</strong></p> <p>宏任务 (macro)task 主要包含：script( 整体代码)、setTimeout、setInterval、I/O、UI 交互事件、setImmediate(Node.js 环境)</p> <p>微任务 microtask主要包含：Promise、MutaionObserver、process.nextTick(Node.js 环境)</p> <p>每一个任务的执行，无论是macro-task还是micro-task，都是借助函数调用栈来完成。</p> <hr> <h2 id="执行上下文"><a href="#执行上下文" class="header-anchor">#</a> <strong>执行上下文</strong></h2> <hr> <h2 id="函数调用栈"><a href="#函数调用栈" class="header-anchor">#</a> <strong>函数调用栈</strong></h2> <hr> <h2 id="promise引用类型"><a href="#promise引用类型" class="header-anchor">#</a> <strong>Promise</strong>引用类型</h2> <p>主要两大用途：通过状态的切换抽象地表示一个异步操作；生成解决值和拒绝理由</p> <ul><li>new实例时要传入一个执行器函数</li> <li>执行器函数作为期约的初始化程序是同步执行的，所以一般是将promise装在一个函数中，在需要时运行这个函数，执行器函数的参数为resolve（<strong>Promise的状态为fullfiled的回调函数</strong>）和reject（<strong>Promise的状态为rejected的回调函数</strong>）</li> <li>通过then，在异步操作执行完后，用链式调用的方式执行回调函数</li> <li>then方法可以接收两个参数，第一个onResolved处理程序，第二个onRejected处理程序，返回一个新的期约实例（通过Promise.resolve()包装onResolved处理程序的返回值）</li> <li>catch用来指定reject的回调，也可以捕获执行resolve的回调时产生的异常</li> <li>all方法在所有异步操作执行完后才执行回调，接受一个promise对象数组</li> <li>race方法</li> <li>map方法</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Promise<span class="token punctuation">.</span>map<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Promise<span class="token punctuation">.</span><span class="token function-variable function">map</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">vals<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span>
            vals<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">val</span> <span class="token operator">=&gt;</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">cb</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span> resolve<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">let</span> p1 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    p2 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">,</span> 
    p3 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'oops'</span><span class="token punctuation">)</span>
Promise<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">pr<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>pr<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
        <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">done</span><span class="token punctuation">(</span>v <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        done
    <span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">vals</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>vals<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="异步函数"><a href="#异步函数" class="header-anchor">#</a> <strong>异步函数</strong></h2> <hr> <h2 id="google-布尔搜索"><a href="#google-布尔搜索" class="header-anchor">#</a> <strong>Google 布尔搜索</strong></h2> <ul><li>+匹配包含关键字</li> <li>And 完全匹配关键字</li> <li>Or 匹配任意一个关键字的词</li> <li>-排除关键字</li></ul> <p><strong>站内搜索</strong>  site:{站点}</p> <p><strong>标题匹配</strong>  intitle:{标题名}</p> <p><strong>精确查找</strong>   “关键字”</p> <p><strong>组合搜索</strong>    +</p> <p><strong>限定格式</strong>   filetype:{format}</p> <p><strong>时间段搜索</strong>  年份..年份</p> <p><strong>模糊匹配</strong>    *</p> <hr> <h2 id="localstorage、sessionstorage、cookie、session"><a href="#localstorage、sessionstorage、cookie、session" class="header-anchor">#</a> <strong>localStorage、sessionStorage、cookie、session</strong></h2> <table><thead><tr><th></th> <th>存储大小</th> <th>存储类型</th> <th>存储位置</th> <th>生存期</th> <th>支持跨域访问</th></tr></thead> <tbody><tr><td>localStorage</td> <td>5M</td> <td>string</td> <td>客户端</td> <td>永久存储</td> <td></td></tr> <tr><td>cookie</td> <td>4K</td> <td>string</td> <td>客户端</td> <td>在设置的cookie过期时间之前</td> <td></td></tr> <tr><td>session</td> <td>无限制</td> <td>object</td> <td>服务端</td> <td>配置的过期事件</td> <td></td></tr> <tr><td>sessionStorage</td> <td>5M</td> <td>sting</td> <td>客户端</td> <td>会话结束，同源浏览器窗口关闭前</td> <td></td></tr></tbody></table> <p>cookie机制：如果不在浏览器中设置过期事件，cookie被保存在内存中，生命周期随浏览器的关闭而结束，这种cookie简称为会话cookie。如果在浏览器中设置了cookie的过期事件，cookie会被保存在硬盘中，关闭浏览器后，cookie数据仍然存在，直到过期事件结束才消失。</p> <hr> <h2 id="cnosole-log-string-或-object"><a href="#cnosole-log-string-或-object" class="header-anchor">#</a> <strong>cnosole.log( String 或 Object )</strong></h2> <p><strong>JSON.parse(JSON.stringify(obj))</strong></p> <hr> <h2 id="字符串转number"><a href="#字符串转number" class="header-anchor">#</a> <strong>“+”   字符串转number</strong></h2> <hr> <h2 id="js代码简化"><a href="#js代码简化" class="header-anchor">#</a> <strong>JS代码简化</strong></h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">//数组 includes</span>
<span class="token comment">//longhand</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">===</span> <span class="token string">'abc'</span> <span class="token operator">||</span> x <span class="token operator">===</span> <span class="token string">'def'</span> <span class="token operator">||</span> x <span class="token operator">===</span> <span class="token string">'ghi'</span> <span class="token operator">||</span> x <span class="token operator">===</span><span class="token string">'jkl'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//logic</span>
<span class="token punctuation">}</span>
<span class="token comment">//shorthand</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'abc'</span><span class="token punctuation">,</span> <span class="token string">'def'</span><span class="token punctuation">,</span> <span class="token string">'ghi'</span><span class="token punctuation">,</span> <span class="token string">'jkl'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token comment">//logic</span>
<span class="token punctuation">}</span>

检查是否是 <span class="token keyword">null</span> or undefiend 
<span class="token comment">// Longhand</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>test1 <span class="token operator">!==</span> <span class="token keyword">null</span> <span class="token operator">||</span> test1 <span class="token operator">!==</span> <span class="token keyword">undefined</span> <span class="token operator">||</span> test1 <span class="token operator">!==</span> <span class="token string">''</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> test2 <span class="token operator">=</span> test1<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// Shorthand</span>
<span class="token keyword">let</span> test2 <span class="token operator">=</span> test1 <span class="token operator">||</span> <span class="token string">''</span><span class="token punctuation">;</span>

<span class="token operator">??</span> 操作符 
如果左边值为 <span class="token keyword">null</span> 或 <span class="token keyword">undefined</span>，就返回右边的值。默认情况下，它将返回左边的值。

<span class="token keyword">const</span> test<span class="token operator">=</span> <span class="token keyword">null</span> <span class="token operator">??</span> <span class="token string">'default'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出结果: &quot;default&quot;</span>
<span class="token keyword">const</span> test1 <span class="token operator">=</span> <span class="token number">0</span> <span class="token operator">??</span> <span class="token number">2</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>test1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 输出结果: 0</span>

 <span class="token operator">&amp;&amp;</span> 操作符
 
 <span class="token keyword">for</span> <span class="token keyword">in</span> 和 <span class="token keyword">for</span> <span class="token keyword">of</span>
 
 简化<span class="token keyword">switch</span> 
 
<span class="token comment">// Longhand</span>
<span class="token keyword">switch</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">case</span> <span class="token number">1</span><span class="token operator">:</span>
    <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token keyword">case</span> <span class="token number">2</span><span class="token operator">:</span>
    <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token keyword">case</span> <span class="token number">3</span><span class="token operator">:</span>
    <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">break</span><span class="token punctuation">;</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
<span class="token comment">// Shorthand</span>
<span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token number">1</span><span class="token operator">:</span> test1<span class="token punctuation">,</span>
  <span class="token number">2</span><span class="token operator">:</span> test2<span class="token punctuation">,</span>
  <span class="token number">3</span><span class="token operator">:</span> test
<span class="token punctuation">}</span><span class="token punctuation">;</span>
data<span class="token punctuation">[</span>something<span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> data<span class="token punctuation">[</span>something<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

arrow func 隐式返回

<span class="token operator">+</span> <span class="token operator">==</span> parseInt or parseFloat

Object<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   object <span class="token operator">=</span> <span class="token operator">&gt;</span> object array


</code></pre></div><hr> <p><strong>匿名函数与词法作用域</strong>（静态作用域）</p> <p><strong>作用域</strong>：程序中定义变量的区域，用于查找变量，即确定当前执行的代码对变量的访问权限</p> <ul><li>词法意味着只需要查看代码结构就可以确定变量作用域，而不是等到代码执行时才明白</li> <li>在词法作用域中，<strong>重要的是函数是在什么地方定义的</strong>，而不是在上面地方使用的</li> <li>箭头函数中若用了this则这个this指向包裹箭头函数的第一个普通函数的this</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">Foo</span> <span class="token punctuation">(</span><span class="token parameter">car</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> 
    <span class="token punctuation">{</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
        <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>

        Foo<span class="token punctuation">.</span><span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> 
        <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>car <span class="token operator">=</span> car<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
m<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{&quot;car&quot;:3}</span>

<span class="token function">Foo</span><span class="token punctuation">(</span><span class="token number">45</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//不使用new直接把构造函数当普通函数调用将this指向global对象</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>car<span class="token punctuation">)</span>   <span class="token comment">//45</span>
Foo<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//{&quot;car&quot;:3}</span>
</code></pre></div><p><strong>动态改变词法作用域</strong></p> <ul><li>eval 接收一个字符串参数，并像代码一样执行</li> <li>with 利用传入的对象开辟一个新的作用域，并且将对象上的属性作为当前作用域内的变量</li></ul> <hr> <h2 id="函数式编程"><a href="#函数式编程" class="header-anchor">#</a> <strong>函数式编程</strong></h2> <ul><li>只使用表达式，不使用语句</li> <li>纯函数：对于相同的输入，总会得到相同的输出，不依赖于外部环境的状态</li> <li>不改变变量</li> <li>高阶函数：接受一个或多个函数输入，输出一个函数</li> <li>react 中的高阶组件：接受一个组件为参数并返回一个组件</li></ul> <hr> <h2 id="xml-json"><a href="#xml-json" class="header-anchor">#</a> <strong>XML &amp; JSON</strong></h2> <p>XML（e<strong>X</strong>tensible <strong>M</strong>arkup <strong>L</strong>anguage）可扩展标记语言，很像HTML，标记语言</p> <p>JSON存储交换文本信息</p> <hr> <h2 id="异步"><a href="#异步" class="header-anchor">#</a> <strong>异步</strong></h2> <p>异步场景</p> <ul><li>定时器</li> <li>网络请求</li> <li>事件监听</li></ul> <p>异步方法：</p> <ul><li>回调函数</li> <li>Promise</li> <li>generator</li> <li>async/await</li></ul> <hr> <h2 id="函数调用"><a href="#函数调用" class="header-anchor">#</a> <strong>函数调用</strong></h2> <ul><li>函数调用 （this指向window）</li> <li>方法调用  （this指向调用它的对象）</li> <li>构造器调用  （this指向实例对象）</li> <li>间接调用（call，apply）</li></ul> <p>箭头函数中的this不能改变指向，始终指向定义处外部函数指向</p> <hr> <h2 id="惰性求值"><a href="#惰性求值" class="header-anchor">#</a> <strong>惰性求值</strong></h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">Lazy</span> <span class="token operator">=</span> <span class="token parameter">iterator</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// 将iterator的next方法给next变量</span>
    <span class="token keyword">const</span> next <span class="token operator">=</span> iterator<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span>iterator<span class="token punctuation">)</span>

    <span class="token comment">// map 输入一个函数，返回一个对象对象</span>
    <span class="token keyword">const</span> <span class="token function-variable function">map</span> <span class="token operator">=</span>  <span class="token parameter">f</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>

        <span class="token keyword">const</span> <span class="token function-variable function">modifiedNext</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> item <span class="token operator">=</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'map'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> mappedValue <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">value</span><span class="token operator">:</span> mappedValue<span class="token punctuation">,</span>
                <span class="token literal-property property">done</span><span class="token operator">:</span> item<span class="token punctuation">.</span>done
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">const</span> newIter <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>iterator<span class="token punctuation">,</span> <span class="token literal-property property">next</span><span class="token operator">:</span> modifiedNext <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">Lazy</span><span class="token punctuation">(</span>newIter<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> <span class="token function-variable function">filter</span> <span class="token operator">=</span>  <span class="token parameter">predicate</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        
        <span class="token comment">//</span>
        <span class="token keyword">const</span> <span class="token function-variable function">modifiedNext</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> item <span class="token operator">=</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'filter'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">predicate</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> item
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">const</span> newIter <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token operator">...</span>iterator<span class="token punctuation">,</span> <span class="token literal-property property">next</span><span class="token operator">:</span> modifiedNext <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">Lazy</span><span class="token punctuation">(</span>newIter<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">const</span> <span class="token function-variable function">takeWhile</span> <span class="token operator">=</span> <span class="token parameter">predicate</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
        <span class="token keyword">let</span> value <span class="token operator">=</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token function">predicate</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'takewhile'</span><span class="token punctuation">)</span>
            result<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
            value <span class="token operator">=</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> result
    <span class="token punctuation">}</span>
 
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
        next<span class="token punctuation">,</span>
        map<span class="token punctuation">,</span>
        filter<span class="token punctuation">,</span>
        takeWhile
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">numbers</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span>
 <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">yield</span> i<span class="token operator">++</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token function">Lazy</span><span class="token punctuation">(</span><span class="token function">numbers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">**</span> <span class="token number">2</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">takeWhile</span><span class="token punctuation">(</span><span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">&lt;</span> <span class="token number">100</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token comment">//  </span>
<span class="token comment">//  .reduce((x, y) =&gt; x + y)</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">range</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span>from<span class="token punctuation">,</span> to<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'range'</span><span class="token punctuation">)</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> from<span class="token punctuation">;</span> i <span class="token operator">&lt;</span> to<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'range\t'</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">yield</span> i<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">map</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span>flow<span class="token punctuation">,</span> transform<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> data <span class="token keyword">of</span> flow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'map\t'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">yield</span><span class="token punctuation">(</span><span class="token function">transform</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">filter</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span>flow<span class="token punctuation">,</span> condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> data <span class="token keyword">of</span> flow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'filter\t'</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">condition</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">yield</span> data<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">stop</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span>flow<span class="token punctuation">,</span> condition<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">const</span> data <span class="token keyword">of</span> flow<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">yield</span> data<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">condition</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token function-variable function">take</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">flow<span class="token punctuation">,</span> number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> <span class="token function-variable function">_filter</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    count <span class="token operator">++</span>
    <span class="token keyword">return</span> count <span class="token operator">&gt;=</span> number<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token function">stop</span><span class="token punctuation">(</span>flow<span class="token punctuation">,</span> _filter<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">class</span> <span class="token class-name">_Lazy</span><span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>iterator <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">range</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>iterator <span class="token operator">=</span> <span class="token function">range</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>iterator <span class="token operator">=</span> <span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>iterator<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>iterator <span class="token operator">=</span> <span class="token function">filter</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>iterator<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">take</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>iterator <span class="token operator">=</span> <span class="token function">take</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>iterator<span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token punctuation">[</span>Symbol<span class="token punctuation">.</span>iterator<span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>iterator<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">lazy</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">_Lazy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> nums <span class="token operator">=</span> <span class="token function">lazy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">range</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">n</span> <span class="token operator">=&gt;</span> n <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">n</span> <span class="token operator">=&gt;</span> n <span class="token operator">%</span> <span class="token number">3</span> <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">take</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>nums<span class="token punctuation">)</span>
<span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> n <span class="token keyword">of</span> nums<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'num:\t'</span><span class="token punctuation">,</span> n<span class="token punctuation">,</span> <span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="冒泡与捕获"><a href="#冒泡与捕获" class="header-anchor">#</a> <strong>冒泡与捕获</strong></h2> <p>为了解决页面中<strong>事件流</strong>问题（事件发生顺序）</p> <p><a href="https://imgtu.com/i/LVZ3Xn" target="_blank" rel="noopener noreferrer"><img src="https://s1.ax1x.com/2022/04/11/LVZ3Xn.png" alt="LVZ3Xn.png"><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-javascript extra-class"><pre class="language-javascript"><code> element<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">,</span> useCapture<span class="token punctuation">)</span>
</code></pre></div><p>event：时间名</p> <p>function：绑定函数</p> <p>useCapture：默认为false（冒泡）；true（捕获）</p> <p><strong>e.target 和 this</strong>：</p> <ul><li>this 指向绑定事件的对象</li> <li>e.target 触发事件的对象</li></ul> <p><strong>阻止默认行为：</strong></p> <ul><li>event.preventDefault()</li> <li>e.returnValue; 是一个属性，适用于 IE 6 7 8</li> <li>return false</li> <li>vue中使用事件修饰符.prevent</li></ul> <p><strong>阻止冒泡：</strong></p> <ul><li>event.stopPropagation()</li> <li>event.target==event.currentTarget，让触发事件的元素等于绑定事件的元素</li> <li>return false</li> <li>vue中使用事件修饰符.stop</li></ul> <p><strong>事件委托</strong>：</p> <p>子节点上触发的事件，但绑定事件的对象为父节点，通过冒泡触发事件，通过event.target找到触发事件的具体节点</p> <hr> <h2 id="深浅拷贝"><a href="#深浅拷贝" class="header-anchor">#</a> <strong>深浅拷贝</strong></h2> <p>将一个变量赋值给另一个变量时，当变量为原始值，直接赋值；当变量为引用值，将变量的引用赋给另一变量</p> <p>**浅拷贝：**当对象的属性值均为原始值，可使用Object.assign或者展开运算符（...）</p> <p>**深拷贝：**当对象的属性值还有对象，浅拷贝只能解决第一层的问题，使用深拷贝</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>object<span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p>局限性：</p> <ul><li>会忽略 <code>undefined</code></li> <li>会忽略 <code>symbol</code></li> <li>不能序列化函数</li> <li>不能解决循环引用的对象</li></ul> <hr> <h2 id="async-ə-zɪŋk-await"><a href="#async-ə-zɪŋk-await" class="header-anchor">#</a> <strong>async[ə'zɪŋk]/await</strong></h2> <ul><li><p>async函数返回一个resolved promise</p></li> <li><p>await之后跟表达式不同，处理方式不同</p></li></ul> <p>1、对于Promise对象，await会阻塞主函数的执行，等待 Promise 对象 resolve，然后得到 resolve 的值，作为 await 表达式的运算结果，然后继续执行主函数接下来的代码。</p> <p>2、对于非Promise对象，await等待函数或者直接量的返回，而不是等待其执行结果</p> <p>await会阻塞async函数中await之后的代码，保留堆栈中的东西（相当于不仅保存断点，同时也保留断点相关的上下文变量），让async函数立即返回pending promise，暂时返回执行代码的控制权给async函数之后的代码</p> <p><strong>await是一个让出线程的标志</strong>。紧跟在await后面的表达式会先执行一遍，将await后面的代码加入到<strong>微任务</strong>中，然后就会跳出整个async函数来执行后面的代码。</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 start'</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token comment">//微任务</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async1 end'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'async2'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">//  开始执行</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script start'</span><span class="token punctuation">)</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'setTimeout'</span><span class="token punctuation">)</span> <span class="token comment">//宏任务</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise1'</span><span class="token punctuation">)</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token comment">//微任务</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'promise2'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'script end'</span><span class="token punctuation">)</span>
</code></pre></div><p>输出</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&gt;</span> script start
<span class="token operator">&gt;</span> async1 start
<span class="token operator">&gt;</span> async2
<span class="token operator">&gt;</span> promise1
<span class="token operator">&gt;</span> script end
<span class="token operator">&gt;</span> async1 end
<span class="token operator">&gt;</span> promise2
<span class="token operator">&gt;</span> setTimeout
</code></pre></div><hr> <h2 id="input文本框内的事件"><a href="#input文本框内的事件" class="header-anchor">#</a> <strong>input文本框内的事件</strong></h2> <ul><li><strong>vue中无on</strong></li></ul> <p>1.onfocus 当input 获取到焦点时触发</p> <p>2.onblur 当input失去焦点时触发，注意：这个事件触发的前提是已经获取了焦点再失去焦点的时候会触发相应的js</p> <p>3.onchange 当input失去焦点并且它的value值发生变化时触发</p> <p>4.onkeydown 在 input中有键按住的时候执行一些代码</p> <p>5.onkeyup 在input中有键抬起的时候触发的事件，在此事件触发之前一定触发了onkeydown事件</p> <p>6.onclick 主要是用于 input type=button，当被点击时触发此事件</p> <p>7.onselect 当input里的内容文本被选中后执行一段，只要选择了就会触发，不是非得全部选中</p> <hr> <h2 id="weakmap"><a href="#weakmap" class="header-anchor">#</a> <strong>WeakMap</strong></h2> <ul><li><p>键必须为对象，值为任意值</p></li> <li><p>只有通过键对象的引用才能取到值，如果使用字符串就无法区分对字符串变量是否可以回收掉</p></li> <li><p>如果没这个键没有在其他地方被引用，这个键值对就会从弱映射中消失。</p></li> <li><p>object 键必须为字符串</p></li> <li><p>map 键可以是Number、Array、Function</p></li></ul> <hr> <h2 id="for-in-for-of"><a href="#for-in-for-of" class="header-anchor">#</a> <strong>for in &amp; for of</strong></h2> <p>for in 遍历可枚举属性，包括原型链上的可枚举属性</p> <p>for of 遍历可迭代对象</p> <hr> <h2 id="object-is"><a href="#object-is" class="header-anchor">#</a> <strong>Object.is</strong></h2> <p>多值相等判定</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">recursivelyCheckEqual</span> <span class="token punctuation">(</span><span class="token parameter">x<span class="token punctuation">,</span> <span class="token operator">...</span>rest</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    retrun Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> rest<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>rest<span class="token punctuation">.</span>length <span class="token operator">&lt;</span> <span class="token number">2</span> <span class="token operator">||</span> <span class="token function">recursivelyCheckEqual</span><span class="token punctuation">(</span><span class="token operator">...</span>rest<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="包装类"><a href="#包装类" class="header-anchor">#</a> <strong>包装类</strong></h2> <ul><li><p>原始值（null、undefined、number、string、boolean）没有属性和方法</p></li> <li><p>利用包装类变成对象Boolean、Number、String</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> num<span class="token operator">=</span><span class="token number">123</span><span class="token punctuation">;</span>                           <span class="token comment">//不是对象</span>
<span class="token keyword">let</span> newNum<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">Number</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>            <span class="token comment">//是对象</span>
</code></pre></div></li> <li><p>隐式包装类：隐式转换，新建一个对象，添加属性并赋值，最后删除这个对象</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">let</span> num<span class="token operator">=</span><span class="token number">4</span><span class="token punctuation">;</span>
num<span class="token punctuation">.</span>len<span class="token operator">=</span><span class="token number">3</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num<span class="token punctuation">.</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//undefined</span>
</code></pre></div></li></ul> <hr> <h2 id="nodejs模拟oj"><a href="#nodejs模拟oj" class="header-anchor">#</a> <strong>Nodejs模拟OJ</strong></h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">const</span> readline <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'readline'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> rl <span class="token operator">=</span> readline<span class="token punctuation">.</span><span class="token function">createInterface</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">input</span><span class="token operator">:</span> process<span class="token punctuation">.</span>stdin<span class="token punctuation">,</span>
    <span class="token literal-property property">output</span><span class="token operator">:</span> process<span class="token punctuation">.</span>stdout
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rl<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'line'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 获取输入</span>
    <span class="token keyword">let</span> inputs <span class="token operator">=</span> data<span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 处理</span>
    <span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">deal</span><span class="token punctuation">(</span>inputs<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 输出结果</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">我是</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>result<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rl<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rl<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  process<span class="token punctuation">.</span><span class="token function">exit</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * [deal description]
 * @param  {[type]} inputs [description]
 * @return {[type]}        [description]
 */</span>
<span class="token keyword">function</span> <span class="token function">deal</span><span class="token punctuation">(</span><span class="token parameter">inputs</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>

    <span class="token comment">// dosomething</span>

    <span class="token keyword">return</span> result <span class="token operator">+</span> inputs<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr> <h2 id="什么时候不能使用箭头函数"><a href="#什么时候不能使用箭头函数" class="header-anchor">#</a> 什么时候不能使用箭头函数</h2> <ul><li>对象方法中，不适用箭头函数</li> <li>原型对象方法中，不适用箭头函数</li> <li>构造函数不能使用箭头函数</li> <li>动态上下文中的回调函数不适用箭头函数，比如点击事件</li> <li>vue生命周期和method中不适用箭头函数</li></ul> <p>vue本质是一个对象，react本身是一个ES6的class，所以可以。</p> <hr> <h2 id="es6-class"><a href="#es6-class" class="header-anchor">#</a> ES6 class</h2> <ul><li>方法之间不用加<strong>逗号</strong>，不然会报错</li></ul> <h2 id="function-apply-bind-function-bind-apply"><a href="#function-apply-bind-function-bind-apply" class="header-anchor">#</a> Function.apply.bind&amp;Function.bind.apply</h2> <p>Function.apply.bind(fn, null) &lt;=&gt; fn.apply(null)</p> <p>Function.bind.apply(fn, null) &lt;=&gt; fn.bind(null)</p> <h2 id="ajax"><a href="#ajax" class="header-anchor">#</a> Ajax</h2> <ul><li>AJAX（Asynchronous JavaScript and XML）</li> <li>XMLHttpRequest对象三个属性：onreadystatechange、readyState、status</li> <li>onreadystatechange存储函数（或函数名），每当 readyState 属性改变时，就会调用该函数</li> <li>readyState存储XMLHttpRequest 的状态
<ul><li>0: 请求未初始化</li> <li>1: 服务器连接已建立</li> <li>2: 请求已接收</li> <li>3: 请求处理中</li> <li>4: 请求已完成，且响应已就绪</li></ul></li> <li>每当 readyState 改变时，就会触发 onreadystatechange 事件</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">request</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> xmlhttp<span class="token operator">=</span><span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        xmlhttp<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span><span class="token operator">=</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>xmlhttp<span class="token punctuation">.</span>readyState<span class="token operator">==</span><span class="token number">4</span> <span class="token operator">&amp;&amp;</span> xmlhttp<span class="token punctuation">.</span>status<span class="token operator">==</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token function">resolve</span><span class="token punctuation">(</span>xmlhttp<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        xmlhttp<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span><span class="token string">&quot;https://www.runoob.com/try/ajax/ajax_info.txt&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        xmlhttp<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">loadXMLDoc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">request</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    	document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">&quot;myDiv&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML<span class="token operator">=</span>data
	<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="支持promise-的generator-runner"><a href="#支持promise-的generator-runner" class="header-anchor">#</a> 支持Promise 的Generator Runner</h2> <ul><li>实现Promise驱动的生成器</li> <li>不需要为每一个生成器手动编写Promise链</li> <li>自动异步执行穿给它的生成器，直到结束</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">run</span> <span class="token punctuation">(</span><span class="token parameter">gen</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> args <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>arguments<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> it
    
    <span class="token comment">// 在当前上下文中初始化生成器</span>
    it <span class="token operator">=</span> <span class="token function">gen</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
    
    <span class="token comment">// 返回一个promise用于生成器完成</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise<span class="token punctuation">.</span>resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">handleNext</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> next <span class="token operator">=</span> it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token comment">// </span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">handleResult</span> <span class="token punctuation">(</span><span class="token parameter">next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>next<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">return</span> next<span class="token punctuation">.</span>value
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token comment">// 成功就恢复异步循环，把决议值发回生成器</span>
                <span class="token comment">// 如果value是拒绝的promise，就把原因传回生成器进行出错处理，生成器中可以捕获异步的抛出的错误</span>
                <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>next<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>handleNext<span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token function">handleErr</span> <span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>handleResult<span class="token punctuation">)</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>next<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/accumulate/H5离线缓存.html" class="prev">
        H5离线缓存（应用程序缓存）Deprecated
      </a></span> <span class="next"><a href="/accumulate/JS手写.html">
        new、call、apply实现
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ffeb74c7.js" defer></script><script src="/assets/js/2.8c000b42.js" defer></script><script src="/assets/js/11.0bca9d9a.js" defer></script>
  </body>
</html>
