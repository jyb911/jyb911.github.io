<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>杂 | Jay&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/codecat.jpeg">
    <meta name="description" content="贾一倍的个人网站">
    
    <link rel="preload" href="/assets/css/0.styles.35bcedcf.css" as="style"><link rel="preload" href="/assets/js/app.ffeb74c7.js" as="script"><link rel="preload" href="/assets/js/2.8c000b42.js" as="script"><link rel="preload" href="/assets/js/42.e1ae6c7e.js" as="script"><link rel="prefetch" href="/assets/js/10.d264db59.js"><link rel="prefetch" href="/assets/js/11.0bca9d9a.js"><link rel="prefetch" href="/assets/js/12.4f250ebe.js"><link rel="prefetch" href="/assets/js/13.e66cb20f.js"><link rel="prefetch" href="/assets/js/14.e9740e5f.js"><link rel="prefetch" href="/assets/js/15.77f24c1c.js"><link rel="prefetch" href="/assets/js/16.81145a00.js"><link rel="prefetch" href="/assets/js/17.fecbbc6a.js"><link rel="prefetch" href="/assets/js/18.fa64136a.js"><link rel="prefetch" href="/assets/js/19.0bf73149.js"><link rel="prefetch" href="/assets/js/20.ecf66ee0.js"><link rel="prefetch" href="/assets/js/21.9b56c347.js"><link rel="prefetch" href="/assets/js/22.eba330b8.js"><link rel="prefetch" href="/assets/js/23.cdfc8136.js"><link rel="prefetch" href="/assets/js/24.ecbff0b4.js"><link rel="prefetch" href="/assets/js/25.a765f52f.js"><link rel="prefetch" href="/assets/js/26.1df3f3be.js"><link rel="prefetch" href="/assets/js/27.6d559f57.js"><link rel="prefetch" href="/assets/js/28.44d0a27d.js"><link rel="prefetch" href="/assets/js/29.0db53b84.js"><link rel="prefetch" href="/assets/js/3.593bb0f3.js"><link rel="prefetch" href="/assets/js/30.ecd999ba.js"><link rel="prefetch" href="/assets/js/31.52600e5f.js"><link rel="prefetch" href="/assets/js/32.32943b2d.js"><link rel="prefetch" href="/assets/js/33.362f4d59.js"><link rel="prefetch" href="/assets/js/34.d0944a8e.js"><link rel="prefetch" href="/assets/js/35.bf1908ad.js"><link rel="prefetch" href="/assets/js/36.2d9be9dc.js"><link rel="prefetch" href="/assets/js/37.3358ac3c.js"><link rel="prefetch" href="/assets/js/38.bae9ecf2.js"><link rel="prefetch" href="/assets/js/39.dfcb747a.js"><link rel="prefetch" href="/assets/js/4.01f7dd6c.js"><link rel="prefetch" href="/assets/js/40.dbf6c454.js"><link rel="prefetch" href="/assets/js/41.a517905d.js"><link rel="prefetch" href="/assets/js/43.c20697cd.js"><link rel="prefetch" href="/assets/js/44.d5c401fa.js"><link rel="prefetch" href="/assets/js/45.810ad2fb.js"><link rel="prefetch" href="/assets/js/46.cfe99c5e.js"><link rel="prefetch" href="/assets/js/47.32a6c154.js"><link rel="prefetch" href="/assets/js/48.be512d65.js"><link rel="prefetch" href="/assets/js/49.d36d3e6d.js"><link rel="prefetch" href="/assets/js/5.eb23ea04.js"><link rel="prefetch" href="/assets/js/50.4312a7d3.js"><link rel="prefetch" href="/assets/js/51.8db2277f.js"><link rel="prefetch" href="/assets/js/52.0ae05eb4.js"><link rel="prefetch" href="/assets/js/53.e61fc25e.js"><link rel="prefetch" href="/assets/js/54.0f5b381c.js"><link rel="prefetch" href="/assets/js/55.c7beb55c.js"><link rel="prefetch" href="/assets/js/56.97fa88fd.js"><link rel="prefetch" href="/assets/js/57.1e086f28.js"><link rel="prefetch" href="/assets/js/58.97111a0a.js"><link rel="prefetch" href="/assets/js/59.8865259a.js"><link rel="prefetch" href="/assets/js/6.516e3b20.js"><link rel="prefetch" href="/assets/js/60.0541b26f.js"><link rel="prefetch" href="/assets/js/61.624fbdfa.js"><link rel="prefetch" href="/assets/js/62.e71bbf4a.js"><link rel="prefetch" href="/assets/js/63.ad78749d.js"><link rel="prefetch" href="/assets/js/64.931d419d.js"><link rel="prefetch" href="/assets/js/65.b46213b4.js"><link rel="prefetch" href="/assets/js/66.92c8d024.js"><link rel="prefetch" href="/assets/js/67.c63280ef.js"><link rel="prefetch" href="/assets/js/68.16012c5b.js"><link rel="prefetch" href="/assets/js/69.b4a8ea96.js"><link rel="prefetch" href="/assets/js/7.c7625e6b.js"><link rel="prefetch" href="/assets/js/70.c03c3735.js"><link rel="prefetch" href="/assets/js/71.76491655.js"><link rel="prefetch" href="/assets/js/72.ab24e160.js"><link rel="prefetch" href="/assets/js/73.9026af07.js"><link rel="prefetch" href="/assets/js/74.8f925ea4.js"><link rel="prefetch" href="/assets/js/75.8c3d4d08.js"><link rel="prefetch" href="/assets/js/76.2e25789c.js"><link rel="prefetch" href="/assets/js/77.bc9764be.js"><link rel="prefetch" href="/assets/js/78.d13a2495.js"><link rel="prefetch" href="/assets/js/8.80450da7.js"><link rel="prefetch" href="/assets/js/9.dd8d6c7c.js">
    <link rel="stylesheet" href="/assets/css/0.styles.35bcedcf.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Jay's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/accumulate/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/stack/" class="nav-link">
  技术栈
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  计算机网络
</a></div><div class="nav-item"><a href="/optimize/" class="nav-link">
  优化
</a></div><div class="nav-item"><a href="/c++/" class="nav-link router-link-active">
  c++
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/accumulate/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/stack/" class="nav-link">
  技术栈
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div><div class="nav-item"><a href="/browser/" class="nav-link">
  浏览器
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  计算机网络
</a></div><div class="nav-item"><a href="/optimize/" class="nav-link">
  优化
</a></div><div class="nav-item"><a href="/c++/" class="nav-link router-link-active">
  c++
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>c++</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/c++/" aria-current="page" class="sidebar-link">c++</a></li><li><a href="/c++/2024年底.html" class="active sidebar-link">杂</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/c++/2024年底.html#杂" class="sidebar-link">杂</a></li></ul></li><li><a href="/c++/Effective C++.html" class="sidebar-link">Effective C++</a></li><li><a href="/c++/H.264视频解码.html" class="sidebar-link">H.264视频解码</a></li><li><a href="/c++/QGis.html" class="sidebar-link">QGis</a></li><li><a href="/c++/QWinHost.html" class="sidebar-link">QWinHost</a></li><li><a href="/c++/STL.html" class="sidebar-link">STL组件</a></li><li><a href="/c++/TCPdemo.html" class="sidebar-link">TCPdemo</a></li><li><a href="/c++/const&amp;static.html" class="sidebar-link">const&amp;static</a></li><li><a href="/c++/h264转码.html" class="sidebar-link">h264转码</a></li><li><a href="/c++/hplayer播放器.html" class="sidebar-link">hplayer播放器</a></li><li><a href="/c++/mupdf编译使用.html" class="sidebar-link">mupdf编译使用</a></li><li><a href="/c++/位结构体.html" class="sidebar-link">位结构体</a></li><li><a href="/c++/应用发布.html" class="sidebar-link">应用发布</a></li><li><a href="/c++/强制类型转换.html" class="sidebar-link">强制类型转换</a></li><li><a href="/c++/易库.html" class="sidebar-link">链接库</a></li><li><a href="/c++/未分类.html" class="sidebar-link">未分类</a></li><li><a href="/c++/软件工程文档.html" class="sidebar-link">软件工程文档</a></li><li><a href="/c++/软考.html" class="sidebar-link">软考</a></li><li><a href="/c++/高级CC++编译技术.html" class="sidebar-link">高级C/C++编译技术</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="杂"><a href="#杂" class="header-anchor">#</a> 杂</h2> <p>pri文件：模块化 管理头文件，将.pro文件中的一部分放到pri文件中直接引用</p> <p>Q_DECL_EXPORT导出类，生成.dll的同时生成.lib文件，提供外部接口供其他类使用</p> <p>构建是巴开发环境代码转换为生产环境</p> <div class="language-properties extra-class"><pre class="language-properties"><code>.pro文件
<span class="token attr-name">TEMPLATE</span> <span class="token attr-value">生成文件的类型，“app”生成应用程序，“lib”生成库文件</span>
<span class="token attr-name">TARGET</span> <span class="token attr-value">生成的应用程序名</span>
<span class="token attr-name">CONFIG</span> <span class="token attr-value">配置信息</span>
<span class="token attr-name">CODECFORSRC</span> <span class="token attr-value">源代码编码方式</span>
<span class="token attr-name">UI_DIR</span> <span class="token attr-value">将.ui文件转换为ui_*.h文件的存放目录</span>
<span class="token attr-name">RCC_DIR</span> <span class="token attr-value">将.qrc文件转换为qrc_*.h文件的存放目录</span>
<span class="token attr-name">MOC_DIR</span> <span class="token attr-value">将含Q_OBJECT的头文件转换成标准.h文件的目录</span>
<span class="token attr-name">OBJECTS_DIR</span> <span class="token attr-value">目标文件存放位置</span>
<span class="token attr-name">DEPENDPATH</span> <span class="token attr-value">程序依赖路径</span>
<span class="token attr-name">INCLUDEPATH</span> <span class="token attr-value">头文件包含路径</span>
<span class="token attr-name">HEADERS</span> <span class="token attr-value">工程中的头文件</span>
<span class="token attr-name">SOURCEAS</span> <span class="token attr-value">工程中的源文件</span>
<span class="token attr-name">FORMS</span> <span class="token attr-value">工程中的ui设计文件</span>
<span class="token attr-name">RESOURCES</span> <span class="token attr-value">工程中的资源文件</span>
<span class="token attr-name">LIBS</span> <span class="token attr-value">引入lib文件，指定程序编译时需要链接的外部库</span>
<span class="token attr-name">DEFINES</span> <span class="token attr-value">定义编译选项，添加后可以使用#ifdef</span>
<span class="token attr-name">RC_FILE</span> <span class="token attr-value">定义资源文件</span>
<span class="token attr-name">DESTFILES</span> <span class="token attr-value">指定要包含在dist中的文件列表</span>
</code></pre></div><p>C++编译器默认识别不了JS，通过QT提供的QJSEngine类来执行JS</p> <p>.dll dynamic link library 动态链接库</p> <p>,exp 包含有关从dll导出的信息</p> <p>.ilk 被链接器使用</p> <p>.lib 动态库到处说明</p> <p>.pdb 包含调试信息</p> <p>静态成员函数只能访问静态成员</p> <p>普通成员函数只能通过对象调用</p> <p>静态成员函数不需要创建对象，可以通过类直接调用，根本区别this指针的有无</p> <p>Qt国际化 tr</p> <p>QStackedLayout实现多页面切换</p> <p>继承关系QObject -&gt;QCoreApplication-&gt; QGuiApplication-&gt; QApplication</p> <p>部件的大小策略（setSizePolicy）、大小限制（setMaximumWidth）、拉伸因子（setStretchFactor）</p> <p>MSVC：微软的VC编译器（pc端开发）</p> <p>MinGW：跨平台开发，允许在GUN/Linux/Windows平台开发</p> <p>MinGW续下载cmake自行编译</p> <p>GUN：类Unix操作系统，属自由软件集，主要组件包括：GUN编译器集合、GUN C库、GUN文本编译器等</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token attr-name">make，makefile，cmake，</span> <span class="token attr-value">qmakepro</span>
<span class="token attr-name">1.</span> <span class="token attr-value">make是用来执行makefile的</span>
<span class="token attr-name">2.</span> <span class="token attr-value">makefile是类Unix的项目管理工具，对windows不友好，于是有了cmake</span>
<span class="token attr-name">3.</span> <span class="token attr-value">cmake是跨平台项目管理工具，在windows下生成projects文件，在Linux下生成Makefile文件</span>
4，qmake是Qt专用项目工程管理工具，生成.pro文件，在Linux下生成Makefile文件
</code></pre></div><p>Windows平台Qt Creator由Visual Studio编译生成的程序（用MSVC编译器），Qt Creator编译程序时默认使用MinGW（安装Qt时自动下载）</p> <p>Windows Software DevelopmentKit（SDK）不会随Visual Studio一同安装，需要从Microsoft网站下载</p> <p>大端模式：高字节放低地址，低字节放高地址，地址从小到大增加，数据从高到低读取</p> <p>优势：符号位判定固定在第一字节，容易判断正负</p> <p>小端模式：低字节放低地址，高字节放高地址，将地址高低和数据位权有效结合，高地址部分权值高，低地址部分权值低</p> <p>优势：强制转换数据不需要调整字节内容</p> <p>对于ui文件，Qt有解释工具uic将ui文件转为.h文件，在编译时会执行uic，生成ui_xxx.h</p> <p>其中setup函数将控件传递给参数，是由.ui文件生成的类的构造函数</p> <p>Designer创建出来的对象没有基类，通过setup设置基类类型，然后ui对象就添加到基类中，ui对象可以操作所有子控件对象（因为在ui中子控件都是public域）</p> <p>反射机制是指在运行时，能获取任意一个类对象的所有类型信息、属性、成员函数等信息的一种机制</p> <p>元对象是指用于描述另一个对象结构的对象</p> <p>QMetaObject类描述了QObject及其派生类对象的所有元信息</p> <p>QMetaMethod描述成员函数</p> <p>QMetaProperty 描述属性</p> <p>自定义插件</p> <ol><li>定义一组用于与插件对话的接口（仅具有纯虚函数的类）</li> <li>使用Q_DECLARE_INTERFACE宏向Qt元对象系统声明该接口</li> <li>在应用程序中使用QPluginLoader加载插件</li> <li>使用qobject_cast()测试插件是否实现了给定接口</li></ol> <p>编写插件</p> <ol><li>声明一个插件类，该类继承自QObject和该插件要提供的接口</li> <li>使用Q_INTERFACE告诉元对象系统有关接口信息</li> <li>使用Q_PLUGIN_METADATA宏导出插件</li> <li>实现插件接口</li></ol> <p>update触发paintEvent事件</p> <p>QGraphicsScene图形场景</p> <p>QGraphicsItem图形对象</p> <p>QGraphicsView，将QGraphicsScene作为QGraphicsView的场景</p> <p>QPointF是点的浮点型版本，QPoint是点的整型版本</p> <p>QPainter绘制器，执行绘制操作</p> <p>QPaintDevice抽象绘图设备，如QWidget、QImage、QPainter</p> <p>QPaintEngine绘图引擎，提供QPainter绘制在不同设备上的接口</p> <p>多次update()触发的绘制事件会被Qt合并成一个事件统一处理</p> <p>repaint不允许这种优化</p> <p>QPaintPath类是一个容器，可把图形形状保存需要时可重复使用，因此不可将创建路径操作放在paintEvent函数中</p> <p>DPI Dots Per Inch点每英寸</p> <p>PPI Pixel Per Inch像素每英寸</p> <p>QImage图像，可以直接访问和操控像素</p> <p>QPixmap像素图，不能直接访问和操控像素</p> <p>QBitMap位图，用于处理颜色深度为1的图像，继承自QPixmap</p> <p>QPicture图片</p> <p>将图像设置为标签或按钮的图标，或使用QPainter的draw方法使图像显示出来</p> <p>QPixmap、QImage、QPicture都是绘制设备，可在其上直接绘制图形，因为这些绘制设备都不是QWidget部件，因此可以不在paintEvent中绘制</p> <p>针对QLabel显示图片不全的问题涉及到QLabel的一个属性ScaledContents，决定是否缩放label的内容，默认为false，所以只显示像素图的一部分，通过setScaledContents设置为true即可显示完整图片</p> <p>QSharedMemory用于在多个线程和进程之间共享内存段</p> <p>QDataStream用于进行二进制数据流操作，起到类似于数据流管道的作用</p> <p>QBuffer用于在内存中存储数据，可以看作一个特殊的IO设备</p> <p>Qt Designer中使用自定义控件</p> <ul><li>提升法：将自定义控件定义好后，在Qt Designer中先添加一个它的父类控件，再进行提升</li> <li>插件法：自定义控件中QDESIGNER_WIDGET_EXPORT确保Qt Desiner可以在所有平台上创建组件实例</li></ul> <p>Qt插件</p> <p>QDesignerCustomWidgetInterface提供了一个带有界面的自定义小部件。该类包含一组必须子类化的函数，以返回有关小部件的基本信息，例如其类名和头文件名。必须实现其他函数，以便在加载插件时对其进行初始化，并构造自定义小部件的实例供Qt Designer使用。
在实现自定义小部件时，您必须子类化QDesignerCustomWidgetInterface，以便将小部件暴露给Qt Designer</p> <p>QT_CONFIG实现了在编译时期的安全检查，检查指定的Qt特性是否存在或是否可利用</p> <p>影子构建（shadow-build）：使用该模式会使编译生成的文件和源代码分别存放</p> <p>若修改了.pro文件，建议重新构建该项目文件，否则对项目文件的更改不会反映到程序中</p> <p>默认情况下控件不可见</p> <p>源文件为空时构建仍会生成ui文件对应的头文件，头文件中，namespace Ui中的类和头文件中的同名类不是同一个类，Ui::dg定义于ui_dg.h内，头文件中只是一个前置声明</p> <p>构建：即编译，只编译有变化的部分</p> <p>重新构建：把所有部分重新编译</p> <p>运行即调用构建生成的exe文件</p> <p>qmake -project生成.pro文件</p> <p>qmake生成makefile文件</p> <p>mingw32-make生成release版本</p> <p>mingw32-make -f Makefile.Debug生成debug版本</p> <p>无法定位输入点：可能缺少libstdc++-6.dll</p> <p>发布Qt Quick程序，需要用qmldir参数指定qml的安装目录</p> <p>windeployqt D:\qt\xxx.exe --qmldir F:\Qt\qml</p> <p>项目中的第三方库如opencv，仍需要手动拷贝所需dll，可用Dependency Walker查看缺少那些dll文件</p> <p>Enigma Virtual Box程序封装</p> <p>元对象：用来存储类的结构信息的对象</p> <p>类的结构信息存储在一个类型为QMetaObject名为staticMetaObject的全局变量中</p> <p>要想函数被反射，定义Q_INVOKABLE宏</p> <p>要想成员变量被反射，定义Q_PROPERTY宏</p> <p>反射机制--动态灵活</p> <p>qobject_cast将QObject类型转换为目标类型</p> <p>对象树中，子对象通常创建在堆中，使用new创建；父对象通常创建在栈上，使用A ma创建</p> <p>QObject -&gt; QCoreApplication -&gt; QGuiApplication -&gt; QApplication</p> <p>QCoreApplication 提供无GUI程序的事件循环</p> <p>QGuiApplication 管理GUI程序流</p> <p>setWindowFlags改变窗口的基本属性</p> <p>被添加到layout中的widget不需要指定父对象，它会自动reparent到layout install的widget上</p> <p>SQLite是一种轻量级的嵌入式数据库引擎，它提供了一个自包含、零配置、事务性的关系数据库管理系统，Qt种的QSQLite模块</p> <p>QSqlRelationTableModel允许表的列作为其他表的外键，如果想读写model，可在view上使用代理</p> <p>设置外键setRelation</p> <p>设置代理 setItemDelegate</p> <p>数据 -&gt; model -&gt;tableview -&gt; 设置代理</p> <p>​    setTable    setModel</p> <p>QSqlRelationDelegate为展示和编辑来自QSqlRelationTableModel的数据提供代理</p> <p>createEditor在设置数据代理时被调用，用于创建编辑器</p> <p>editorEvent在QTableView等控件中显示编辑模式时调用</p> <p>Clang-Tidy是一个C++预处理器和编译器优化工具，可以自动检测并修复C++代码中如命名冲突、类型错误、重复代码、语法错误、内存泄漏等常见错误</p> <p>Clazy是一个专为Qt设计的静态代码分析器</p> <p>QStringRef对象提升QString处理子串的效率，避免内存分配和引用计数，是QString子串的引用，如果原始QString不存在，QStringRef也不合法</p> <p>POD：Plain Old Data用来表示C++中与C兼容的数据类型，所有POD类型都可以作为union成员，所有非POD都不能作为union成员</p> <p><strong>Q_GLOBAL_STATIC</strong></p> <p>避免在构造函数和析构函数中调用虚函数</p> <p>Qt采用copy-on-write隐式共享特性，在Qt容器类中使用基于范围的for循环时，由于for内部调用了begin()和end()函数，会产生一个非const的容器对象从隐式共享的数据中分离出来，从而出现容器类深拷贝的情况，使用qAsConst或const</p> <p>qAsConst将非常量左值转换为常量左值</p> <p>QXmlStreamReader用于解析XML文档，提供了一种基于流的方式，可以逐个读取XML元素并进行处理</p> <p>startDocument文档开始 startElement XML元素的开始标签</p> <p>多语言界面</p> <ol><li>字符串用tr()封装</li> <li>.pro中设置.ts文件，使用lupdate生成，.ts翻译文件包含项目文件中需要翻译的字符串</li> <li>用Linguist程序翻译</li> <li>使用lrealease编译翻译好的翻译文件生成.qm文件</li> <li>用QTranslator调用.qm文件</li></ol> <p>MinGW（Minimdist GUN for Windows）是windows平台上使用GUN工具集导入库的集合</p> <p>UMP Universed Windows Platform</p> <p>调试器GUN gdb for MinGW和windows的CDB调试器</p> <p>Windows Software Development Kit（SDK）</p> <p>.ui文件 XML格式</p> <p>Qt Designer工具栏</p> <p>Edit Widget（F3）编辑状态</p> <p>Edit Signal/Slots（F4）信号槽可视化设计</p> <p>Edit Buddies 设置一个label与一个组件成为伙伴关系</p> <p>QSignalMapper 将多个信号映射到一个槽函数上</p> <p>只有当信号关联的所有槽函数执行完毕之后，才会执行发射信号处后面的代码</p> <p>当一个信号被发射时，与其关联的槽函通常被立即执行，就像正常调用一个函数一样</p> <p>信号clicked(bool)会将组件当前的选择状态作为一个参数传递</p> <p>Qt Designer在setUi()中通过connectSlotsByName()将界面上的所有信号与槽函数关联起来</p> <p>为应用设置图标，将图标文件复制到项目源程序目录下，在.pro中设置RC_ICONS=appIcon.ico</p> <p>对象的属性和对象的成员变量有什么区别？</p> <p>类是抽象的，定义了对象的结构和行为，包括属性和方法</p> <p>对象是具体的，有不同的状态的行为</p> <p>对于具有不同参数的同名信号，不能采用函数指针的方式进行信号槽关联</p> <p>connect最后一个参数Qt::ConnectionType</p> <p>Qt::AutoConnection</p> <p>Qt::DirectConnection：slot函数在发出信号的线程中执行</p> <p>Qt::QueuedConnection：slot函数在信号接收者的线程中执行</p> <p>槽函数中，使用QObject::sender获取信号发射者的指针</p> <p>QTread中，start()开始执行工作线程的任务，start()会在内部调用run()函数，进行工作线程的事件循环，在run()中调用exit()或quit()结束线程的事件循环，主线程中调用terminate()强制结束线程</p> <p>QMutex lock()、unlock()、trylock()</p> <p>QMutexLocker的构造函数接收一个互斥量作为参数并将其锁定，其析构函数则将此互斥量解锁</p> <p>QReadWriteLock多个线程以只读方式同步访问资源，但同一时间只有一个线程可写</p> <p>lockForRead()读的时候可以允许多个，但不允许写</p> <p>lockForWrite()写的时候不允许读写</p> <p>QReadLocker QWriteLocker构造函数接受一个QReadWrite指针作为参数，析构函数解锁</p> <p>线程使用完锁并释放时，系统会自动唤醒挂起的线程</p> <p>QWaitCondition可以在一个线程满足一定条件时通知其他多个线程，使它们及时做出响应</p> <p>wait(QMutex* lockedMutex)先解锁，使其他线程可以使用lockedMutex，然后等待唤醒条件，被唤醒后再锁定并退出函数，执行后面的语句</p> <p>唤醒条件wakeAll()</p> <p>信号量QSemaphere</p> <p>accquire阻塞地获取资源，如果没有则阻塞直到资源可用</p> <p>带指针数据成员的类需要自己实现：拷贝构造函数，赋值构造函数、析构函数</p> <p>CMake用于生成对应平台的native编译配置文件，并不进行真正的编译环节，再linux平台上，能生成makefile，windows上生成MSVC.sln工程文件</p> <p>tlog文件</p> <p>PDB文件主要用于存储VS调试程序时所需要的基本信息如源文件名、变量名、函数名等</p> <p>EXP导出库文件，包含了导出函数和数据项的信息，当LIB创建一个导入库时，会同时创建一个导出库文件</p> <p>vcxproj文件用于存储C++项目配置信息</p> <p>std::function可以存储任何可调用对象，并允许在运行时调用它</p> <p>Pluma用于管理插件的开源架构</p> <p>PLUMA_PROVIDer_TYPE声明插件接口对应的Provider类的类型名称</p> <p>CRITICAL_SECTION是windows中用于实现线程同步的一种机制。它允许多个线程同时访问共享资源，但同一时间只有一个线程可以执行临界区内的代码</p> <p>QStringRef the wrapper of QString substrings只读，是一种引用，只有被引用的QString存在时才有效</p> <p>QSignalMapper将相似发送方的信号收集起来，根据发送方绑定的标识重新分发信号</p> <div class="language-q extra-class"><pre class="language-q"><code><span class="token comment">//绑定</span>
connect<span class="token punctuation">(</span>button<span class="token verb operator">,</span> SIGNAL<span class="token punctuation">(</span>clicked<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token verb operator">,</span> signalMapper<span class="token verb operator">,</span> SLOT<span class="token punctuation">(</span>map<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
signalMapper<span class="token verb operator">-</span><span class="token verb operator">&gt;</span>setMapping<span class="token punctuation">(</span>button<span class="token verb operator">,</span> texts<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token adverb function">/</span><span class="token adverb function">/</span>标识
connect<span class="token punctuation">(</span>signalMapper<span class="token verb operator">,</span> SIGNAL<span class="token punctuation">(</span>mapped<span class="token punctuation">(</span>QString<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token verb operator">,</span> this<span class="token verb operator">,</span> SIGNAL<span class="token punctuation">(</span>clicked<span class="token punctuation">(</span>QString<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>lambda函数</p> <p><a href=""></a>{}</p> <p>捕获列表：=按值捕获，&amp;按引用捕获</p> <p>参数列表</p> <p>函数体</p> <p>QSet无序，内部由QHash实现，只能存储可被赋值的数据类型（int、double、QString、QDate等），不可以存储QObject及其子类，而应存储它们的指针</p> <p>QFile路径使用“/”，不支持“\”</p> <p>stdin、stdout、stderr</p> <p>当一个用户进程被创建时，与之对应的三个数据流（stdin、stdout、stderr）也会被创建</p> <p>stdin：标准输入文件，对应键盘</p> <p>stdout：标准输出文件，通常对应终端屏幕，存在缓冲区</p> <p>stderr：标准错误输出文件，通常对应终端屏幕，不存在缓冲区</p> <p>QXmlStreamReader xml流读取，从一个IO设备如QFile</p> <p>QXmlStreamWriter xml流写入，输出到文件QFile或stdout</p> <p>moveToThread更改此对象及其子对象的线程关联，主线程创建一个新线程指针，moveToThread将QObject对象移动到新线程中，此时与该对象的交互只能通过信号槽</p> <p>QSharedPointer共享动态分配对象的所有权，使用引用计数来追踪对象的使用，作用域外引用计数-1，引用计数为0时自动销毁</p> <p>QWeakPointer不会增加引用计数，不会影响对象的生命周期，当对象释放时置空</p> <p>QScopedPointer独占所有权</p> <p>QPointer对象删除后，指针自动置空</p> <p>QThreadPool每一个Qt应用程序都有一个全局QThreadPool对象，可以通过globalInstance()访问线程池对象</p> <p>创建一个QRunnable子类，并实现run虚函数，将子类对象传递给线程池的start方法</p> <p>QPluginLoader调用load()动态加载.dll，instance()获取插件实例对象，但会隐式尝试load插件，如果插件还没有被load的话</p> <p>QEvent当事件发生时，会构建一个QEvent子类，，通过调用notify()将事件对象进行分发</p> <p>event函数与事件处理函数的关系：event()负责把事件传递给目标对象并调用对应的事件处理函数处理事件</p> <p>事件 -&gt; exec() -&gt; notify() -&gt; QObject::event() -&gt; 事件处理函数如keyPressEvent</p> <p>QBuffer、QTcpSocket、QFile继承自QIODevice</p> <p>QByteArray、QDataStream、QTextStream独立</p> <p>字符转换为二进制存储：先利用字符集如Unicode将字符转为数值，再用二进制编码方式如UTF-8将数值编码为二进制形式</p> <p>QString为UTF-16编码后的Unicode文本，QByteArray没有经过编码，储存的是原始数据</p> <p>QString的字符单元是QChar，QByteArray的字节单元是char</p> <p>_CrtSetBreakAlloc()解决HEAP CORRUPTION内存泄漏问题</p> <p>动态库显式调用</p> <p>QLibrary mylib(&quot;/xxx/xxx/test/dd.so&quot;)参数为库地址</p> <p>mylib.load()加载动态库</p> <p>C++ Library</p> <p>生成.dll后，新建lib和include文件夹，lib中放.dll文件，include中放.h文件</p> <p>在.pro文件中配置INCLUDEPATH += $$PWD/include LIBS += -L $$PWD/lib -lMydll</p> <p>引入动态库头文件并定义动态库对象</p> <p>动态库隐式调用：添加库 -&gt; 外部库</p> <p>Qt中，子对象和父对象需要在同一线程，当一个事件发生时，Qt会将其分发到相应的对象进行处理，如果子对象和父对象不在同一线程，那么它们之间的通信可能会出现问题，因为不同线程之间无法直接访问对方的对象</p> <p>QObject及其所有子类都<strong>不是</strong>线程安全的，当从另一个线程访问一个QObject对象时，该对象可能正在处理所在线程的事件，对其处理时要加锁；不能在另一个线程中直接删除一个QObject对象，应调用QObject::deleteLater()向对象所在线程发送一个删除事件</p> <p>sendEvent()阻塞式，直接跳过事件循环队列，同一线程</p> <p>postEvent()非阻塞，发送事件后返回，跨线程</p> <p>多线程</p> <p>可重入：多线程中同时调用但每个线程都有<strong>独立数据</strong></p> <p>线程安全：多线程中同时调用，即使使用<strong>共享数据</strong></p> <p>线程安全一定可重入，可重入不一定线程安全</p> <p>C++类通常是可重入的，类实例只能获取到它们自己的成员变量数据，当一个线程中调用一个实例的成员函数时，其他线程不可以同时调用相同实例的成员函数</p> <p>Qt Concurrent异步</p> <p>QString存储字符串采用的是Uniccode码，每个字符是一个16位的QChar</p> <p>std::function 定义可调用对象</p> <p>std::bind 将可调用对象和参数一起绑定，绑定后的结果使用std::function保存并延迟调用到任何需要的时候</p> <p>model是视图到原始数据的接口，以表格为层次结构表示数据，视图组件通过这种规则来存取模型中的数据，widget相当于把模型和视图结合到一起</p> <p>QModelIndex模型索引</p> <p>代理在视图组件上为编辑数据提供编辑器，代理从model获取相应数据，然后显示在编辑器里，修改数据后，又将其保存到model中</p> <p>如果widget上已经有layout，则不能install anather layout，要先移除当前layout</p> <p>toLatin1()将字符串转换为Latin1编码的QByteArray</p> <p>toLocal8Bit()本地操作系统设置的字符集编码一般为GB2312</p> <p>无法定位程序输入点：生成.exe所使用的lib文件的版本和在运行.exe时所调用的dll版本不一致，也可能是Qt版本不同</p> <p>跨进程通信：共享内存、信号量、管道、QSharedMemory、QLocalServer/QLocalSocket</p> <p>QDataStream保存文件时使用的数据编码方式有两种：</p> <ol><li>用Qt预定义编码保存各种类型数据的文件，定义文件后缀为.stm</li> <li>标准编码数据文件，定义文件后缀为.dat，完全使用数据的二进制原始内容</li></ol> <p>字符编码：将字符集中的<strong>字符</strong>转换为计算机可以理解和处理的<strong>数字</strong></p> <p>字符集：一个系统可以处理的所有字符的集合，如ASCII字符集包含了基本的拉丁字母、数字和一些标点符号</p> <p>码点：对字符集中每个字符的唯一标识，通常是一个数字编号</p> <p>编码方式：指如何将码点转换为二进制数据</p> <p>在简体中文windows os中，ANSI代表GB2312，在繁体中代表Big5、</p> <p>ANSI并不是一种特定编码，而是不同地区扩展编码方式的统称</p> <p>std::move 将一个对象的所有权转移给另一个对象</p> <p>派生类定义析构函数最好显式声明为override，否则可能隐藏基类析构函数或被误认为是一个析构函数重载</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/c++/" class="prev router-link-active">
        c++
      </a></span> <span class="next"><a href="/c++/Effective C++.html">
        Effective C++
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.ffeb74c7.js" defer></script><script src="/assets/js/2.8c000b42.js" defer></script><script src="/assets/js/42.e1ae6c7e.js" defer></script>
  </body>
</html>
